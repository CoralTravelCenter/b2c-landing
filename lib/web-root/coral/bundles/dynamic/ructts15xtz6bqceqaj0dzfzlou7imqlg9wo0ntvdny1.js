"use strict";var $stage="coral",$gdsUrl="https://booking.coral.ru",$urlAppendix="",$ascr="6904f4248b219518cdd3c56ab1980bb8";(function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n})()({1:[function(){var n=function(){var t="leftSiblingMenu",n=void 0,i=function(){var n=function(n){i(n)},i=function(){$(".slide").on("click",function(){var n=$(this).parent().parent().children(".slideContent");$(n).slideToggle()})};return{init:function(){moduleFactory.registerModule(t,n)}}};return{getInstance:function(){return n||(n=i()),n}}}(),t=n.getInstance();t.init()},{}]},{},[1]);"use strict";var $stage="coral",$gdsUrl="https://booking.coral.ru",$urlAppendix="",$ascr="6904f4248b219518cdd3c56ab1980bb8";(function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n})()({1:[function(){var n=function(){var t="searchtabsmain",n=void 0,i=function(){var n=function(n){i(n)},i=function(n){$(n).on("click",".btnShowMore",function(){$("[data-module=searchtabsmain]").data("ishomepage")||$(n).removeAttr("data-ishomepage");$(".showMoreTab").hide();$(".container-tabItemWrap .activeTab").slideDown();$(".search-summary",n).hide()});$(n).on("click",".btnShowLess",function(){var t=$(this);$("[data-module=searchtabsmain]").data("ishomepage")||$(n).removeAttr("data-ishomepage");t.closest(".container-tabItem").slideUp();$(".showMoreTab").show()})};return{init:function(){moduleFactory.registerModule(t,n)}}};return{getInstance:function(){return n||(n=i()),n}}}(),t=n.getInstance();t.init()},{}]},{},[1]);"use strict";var $stage="coral",$gdsUrl="https://booking.coral.ru",$urlAppendix="",$ascr="6904f4248b219518cdd3c56ab1980bb8";(function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n})()({1:[function(){(function(n){(function(){var t=function(){var i="packagesearchPartial",t=void 0,r=function(){var r=null,l=7,e=!0,c=!1,o=i18n_en.daterangepicker.locale;o.direction="package_datepicker";o.applyLabel=i18n_en.partials.searchTabs.packageSearch.departureTimePicker.btnApplyDates;var s=_DATEPICKER_DEFAULTS,a=function(n){r=n;y();p();v()},v=function(){t.destination();t.departure();t.departureDateTimePicker();t.passenger(r);t.checkSearch(r);t.nights(r);var n=$(r);$(".btnSendContainer > .btnSubmitPackageSearch",n).on("click",function(){t.sendform(r)})},y=function(){var i=$(".topItem.geolocation"),r=$(".geolocation-current",i),u=$(".geolocation-list .geolocation-item",i);u.on("click",function(){var i=$(this),u,f,e;r.text(i.text());localStorage.removeItem("sess_ps");r.attr("departureid",i.data("departureid"));u=$(".packageSearch__departureInput",".packagetour");u.val(i.text());u.attr("itemname",i.text());u.attr("itemid",i.data("departureid"));f=$(this).data("departureid");$.ajax({type:"post",url:n.getApplicationURL("/v1/departure/"+f),success:function(n){window.location.href=n}});e=[{Id:parseInt(i.data("departureid")),Label:i.text()}];t.packageSearchModel(e,"departure");t.createNights()})},p=function(){var i=$(".commonModal"),f="modalActiveFlightList",r,u;$(document).off("click",".destinationContainer .addonButton").on("click",".destinationContainer .addonButton",function(){n.modalloader.add(i);n.commonmodal.show({url:n.getApplicationURL("/v1/customer/modal/activeflightlist")},{targetModal:"commonModal",additionalClass:f,modalDialogClass:"activeFlightListModalDialog"},function(){n.modalloader.remove();var r=$(".packageSearch__departureListItem",".packageSearch__departureList");_.forEach(r,function(n){var r=$(n).data("itemid"),t=$(n).data("itemname");$(".activeFlightList__departureList",i).append('<li class="activeFlightList__departureListItem" data-itemid="'+r+'" data-itemname="'+t+'" countryid=""> '+t+"<\/li>")});$(document).off("click",".commonModal .btnCancelModal").on("click",".commonModal .btnCancelModal",function(){i.modal("hide")});$(document).off("click",".commonModal .btnApplyModal").on("click",".commonModal .btnApplyModal",function(){var c,r;if($(".selected",i).length>0){var l=$(".selected",i),u=void 0,a=void 0,e=void 0;localStorage.removeItem("sess_ps");var o=$(".packagetour"),v=$(".packageSearch__NightsInput",o),h=$(".departureContainer .packageSearch__departureInput",o),f=$(".destinationContainer .packageSearch__destinationInput",o),s=$(".departureDateTimePickerContainer .packageSearch__departureDateTimePickerInput",o);v.text("");t.modelpool.Acc=null;_.forEach(l,function(n){$(n).hasClass("activeFlightList__departureListItem")?u=n:$(n).hasClass("activeFlightList__destinationListItem")?a=n:$(n).hasClass("activeFlightList__flightListItem")&&(e=n)});$.ajax(n.getApplicationURL("/v1/destination/destinationbyid?destinationId="+$(e).data("toareaid"))).done(function(n){var r=n.Item,i;r!==undefined&&r.DataId>0?(i={data:r},t.packageSearchModel(i,"destination"),f.val($(".text",e).text()),f.attr("countryid",t.getCountryId(i.data)),f.attr("areaid",t.getAreaId(i.data)),f.attr("placeid",t.getPlaceId(i.data)),f.attr("hotelid",t.getHotelId(i.data)),t.createNights()):console.log("destination is not found!")});c=[{Id:parseInt($(u).data("itemid")),Label:$(u).data("itemname")}];h.val($(u).data("itemname"));h.attr("itemid",$(u).data("itemid"));t.packageSearchModel(c,"departure");r=$(".date",e).text();s.val(r);s.data("daterange",0);t.renderDateUI(s,r);t.packageSearchModel(0,"dateRange");t.packageSearchModel(r,"selectedDate");t.packageSearchModel(r,"beginDate");t.packageSearchModel(r,"endDate");i.modal("hide")}})})});$(document).off("click",".stepContainerDeparture .activeFlightList__departureList .activeFlightList__departureListItem").on("click",".stepContainerDeparture .activeFlightList__departureList .activeFlightList__departureListItem",function(){$(".activeFlightList__departureListItem.selected",i).removeClass("selected");$(this).addClass("selected");r($(this));$(".stepContainerflightList .activeFlightList__flightList",i).empty()});r=function(t){var u=$(".stepContainerDeparture",i),r=$(".stepContainerDestination",i),f=$(".body",r),e=$(".activeFlightList__destinationList",f);n.canvasloader.add(r);$.ajax({type:"get",url:n.getApplicationURL("/v1/geography/tocountryfilter"),data:{areaid:$(t).data("itemid")},datatype:"json",success:function(n){u.removeClass("active");u.addClass("completed");r.addClass("active");$(".activeFlightListFooter").removeClass("d-block");$(".summary",".activeFlightListFooter").html("").addClass("d-none");$(".btnApplyModal",".activeFlightListFooter").prop("disabled",!0);var t="";n.length>0?_.forEach(n,function(n){t+='<li class="activeFlightList__destinationListItem" data-destinationid="'+n.Id+'">'+n.Name+"<\/li>"}):t="<li><div>No result...<\/div><\/li>";e.html(t)},complete:function(){n.canvasloader.remove(r)}})};$(document).off("click",".commonModal .activeFlightList__destinationListItem").on("click",".commonModal .activeFlightList__destinationListItem",function(){$(".activeFlightListFooter").removeClass("d-block");$(".summary",".activeFlightListFooter").html("").addClass("d-none");$(".btnApplyModal",".activeFlightListFooter").prop("disabled",!0);$(".activeFlightList__destinationListItem.selected",i).removeClass("selected");$(this).addClass("selected");u($(this))});u=function(t){var f=$(".stepContainerDeparture",i),e=$("li.selected",f).data("itemid"),u=$(".stepContainerDestination",i),r=$(".stepContainerflightList",i),o=$(".body",r),s=$(".activeFlightList__flightList",o);n.canvasloader.add(r);$.ajax({type:"get",url:n.getApplicationURL("/v1/flight/availabledate"),data:{fromAreaId:parseInt(e),toCountryId:parseInt(t.data("destinationid"))},datatype:"json",success:function(n){u.removeClass("active");u.addClass("completed");r.addClass("active");var t="";n.isSuccess?t="<li><div>An error occured...<\/div><\/li>":n.Result.length>0?_.forEach(n.Result,function(n){t+='<li class="activeFlightList__flightListItem" data-toareaid="'+n.ToAreaId+'"><span class="text">'+n.ToAreaName+'<\/span><span class="date">'+moment(n.FlightDate,"x").format("DD.MM.YYYY")+"<\/span><\/li>"}):t="<li><div>No result...<\/div><\/li>";s.html(t)},complete:function(){n.canvasloader.remove(r)}})};$(document).off("click",".commonModal .activeFlightList__flightListItem").on("click",".commonModal .activeFlightList__flightListItem",function(){var n=$(".stepContainerflightList",i);$(".activeFlightList__flightListItem.selected",i).removeClass("selected");$(this).addClass("selected");n.removeClass("active");n.addClass("completed");var t=$(".activeFlightList__departureListItem.selected").text(),r=$(".activeFlightList__destinationListItem.selected").text(),u=$(".text",this).text(),f=$(".date",this).text();$(".summary",i).html("<p>"+i18n_en.partials.header.ChoiceText+" : <abbr>"+t+"<\/abbr> - <abbr>"+r+"<\/abbr> <span>&#9658;<\/span> <abbr>"+u+"<\/abbr> - <abbr>"+f+"<\/abbr><\/p>").removeClass("d-none");$(".activeFlightListFooter").addClass("d-block");$(".btnApplyModal",".activeFlightListFooter").prop("disabled",!1)});$(document).off("click",".commonModal .activeFlightListRow .back").on("click",".commonModal .activeFlightListRow .back",function(){var t=$(".stepContainerDeparture"),n=$(".stepContainerDestination"),i=$(".stepContainerflightList");$(".activeFlightListFooter").removeClass("d-block");$(".summary",".activeFlightListFooter").html("").addClass("d-none");$(".btnApplyModal",".activeFlightListFooter").prop("disabled",!0);switch($(this).data("goto")){case 1:n.removeClass("active").removeClass("completed");t.removeClass("completed").addClass("active");break;case 2:i.removeClass("active").removeClass("completed");n.removeClass("completed").addClass("active")}})},h=[],t={modelpool:{isCharter:!1,isRegular:!1,Guest:{Adults:0,Children:[]}},flightDatePickerResponse:null,checkSearch:function(n){var s=n,et=$(".container-topside"),i=$(".container-tabItemWrap").data("searchparams").PackageSearchQuery,k=$(".dynamicPackageSearch").data("packagesearch"),h,r,nt,it,rt,ut,o,p,w,b,ft,l;if(_.isNil(i)&&localStorage.getItem("sess_ps")!==null&&(moment(JSON.parse(localStorage.getItem("sess_ps")).expired,"x").format("x")<moment().format("x")?localStorage.removeItem("sess_ps"):moment(JSON.parse(localStorage.getItem("sess_ps")).data.BeginDate).isBefore(moment(),"day")&&moment(JSON.parse(localStorage.getItem("sess_ps")).data.EndDate).isBefore(moment(),"day")?localStorage.removeItem("sess_ps"):(i=JSON.parse(localStorage.getItem("sess_ps")).data,h=moment().format("YYYY-MM-DD"),moment(i.SelectedDate).isBefore(moment(h))?(i.SelectedDate=moment(h),i.DateRange=0,i.BeginDate=moment(h),i.EndDate=moment(h)):(i.SelectedDate=moment(i.SelectedDate,"YYYY-MM-DD"),i.BeginDate=moment(i.BeginDate,"YYYY-MM-DD"),i.EndDate=moment(i.EndDate,"YYYY-MM-DD")))),k&&(i=k),_.isNil(i)||i==="")o=$(".packageSearch__departureInput",s),(_.isNil(o.val())||o.val()==="")&&(p=$(".geolocation-container",et),$(".geolocation-current",p).length>0&&(w=$(".geolocation-current",p).data("itemname"),b=$(".geolocation-current",p).data("itemid"),o.val(w),o.attr("itemname",w),o.attr("itemid",b),ft=[{Id:parseInt(b),Label:w}],t.packageSearchModel(ft,"departure"))),t.createNights(n),l=[2,0],t.updatePassengerInputText(l[0],l[1]),t.packageSearchModel(l[0],"adult"),$(".adultInput").val(l[0]);else{e=!1;c=!0;i.Departures!==null&&t.packageSearchModel(i.Departures,"departure");i.Destination!==null&&t.packageSearchModel({data:i.Destination[0]},"destination");t.packageSearchModel(moment(i.BeginDate).format("DD.MM.YYYY"),"beginDate");t.packageSearchModel(moment(i.EndDate).format("DD.MM.YYYY"),"endDate");t.packageSearchModel(moment(i.SelectedDate).format("DD.MM.YYYY"),"selectedDate");t.packageSearchModel(i.DateRange,"dateRange");t.packageSearchModel(i.Acc,"nights");t.packageSearchModel(i.isCharter,"charter");t.packageSearchModel(i.isRegular,"regular");t.packageSearchModel(i.Guest,"searchparam_guest");var a=$(".packageSearch__destinationInput ",s),ot=i.Destination!==null?i.Destination[0].TitleRu:null,st=i.Destination!==null?t.getCountryId(i.Destination[0]):null;a.val(ot);a.attr("countryid",st);a.attr("destinationid",i.Destination!==null?i.Destination[0].Id:"");a.attr("nearestAirports",i.Destination!==null?t.getNearestAirports(i.Destination[0]):"");var d=$(".packageSearch__departureInput",s),v=null,g=void 0;i.Departures!==null&&(v=i.Departures[0].TitleRu!==undefined&&i.Departures[0].TitleRu!==null?i.Departures[0].TitleRu:null,v=_.isNil(v)?i.Departures[0].Label:null,g=i.Departures[0].Id!==null?i.Departures[0].Id:null);d.val(v);d.attr("itemid",g);r=$(".packageSearch__departureDateTimePickerInput",s);nt=moment(i.SelectedDate).format("DD.MM.YYYY");r.data("daterangepicker").setStartDate(moment(i.SelectedDate).format("DD/MM/YYYY"));r.val(nt);r.data("daterange",parseInt(i.DateRange));r.data("ischarter",i.isCharter);r.data("isregular",i.isRegular);t.renderDateUI(r,i.SelectedDate);t.setNights(i.Acc);var f=$(".passengersContainer .packageSearch__passengerListContainer",s),tt=i.Guest.Adults,y=_.isNil(i.Guest.Children)?0:i.Guest.Children.length,ht=_.isNil(i.Guest.Children)?[]:i.Guest.Children;t.updatePassengerInputText(tt,y);it=$(".adultInput",f);it.val(tt);rt=$(".childInput",f);rt.val(y);$(".childInput",f).val()!=="0"?$(".passengerContainerChildTitle",f).show():$(".passengerContainerChildTitle",f).hide();y!==0&&(u(y),ut=$(".childAgeMain",f),_.forEach(ut,function(n,t){$(".childAge"+(t+1)+" .childAgeInput",f).val(ht[t])}))}},destination:function(){var f=$(".destinationContainer",r),s=$(".packageSearch__destinationInput_mobile",f),u=!0,c=n.getApplicationURL("/v1/search/destinations"),i=$(".packageSearch__destinationInput",f),l=i18n_en.partials.searchTabs.hotelSearch.noResult;i.autocomplete({serviceUrl:c,paramName:"keyword",params:{type:"package"},dataType:"json",deferRequestBy:300,minChars:3,showNoSuggestionNotice:!1,noSuggestionNotice:l,triggerSelectOnValidInput:!1,groupBy:"ModelType",autoSelectFirst:!0,appendTo:s,beforeRender:function(){i.removeAttr("dataid");i.removeAttr("countryid");i.removeAttr("nearestAirports");i.removeAttr("destinationid")},onSearchComplete:function(n,t){if(i.removeData("firstSuggestion"),!_.isEmpty(t)){i.data("firstSuggestion",t[0]);$(".autoComplete_SearchText").remove();var r={5:"&#xe53a",4:"&#xe0c8",1:"&#xe0c8"};t=$(".autocomplete-suggestion",s).each(function(n){var i=t[n].data,u=r[i.ModelType];$(this).prepend('<i class="material-icons">'+u+"<\/i>");_.isNil(i.ParentTitleRu)||$(this).append('<span class="titleru">'+i.ParentTitleRu+"<\/span>")})}},transformResult:function(n){return{suggestions:$.map(n.Results,function(n){return{value:_.isNil(n.TitleRu)?n.Title:n.TitleRu,data:n}})}},onSelect:function(r){h(r,i);t.createNights();u?($(".packageSearch__destinationInput_mobile").removeClass("show"),n.preventpagescroll.remove(),$(this).trigger("blur")):($(".packageSearch__destinationInput_mobile").addClass("show"),n.preventpagescroll.onlymobile());u=!0},onHide:function(){}});i.on("focus",function(){o($(this));$(".packageSearch__destinationInput_mobile").addClass("show");n.preventpagescroll.onlymobile();u=!1});i.on("blur",function(){o($(this));u=!0});i.on("keyup",function(){_.isEmpty($(this).val())&&o($(this));$(".packageSearch__destinationInput_mobile").hasClass("show")||$(this).attr("dataid")!==undefined||($(".packageSearch__destinationInput_mobile").addClass("show"),n.preventpagescroll.onlymobile())});$(".mobileclose",".packageSearch__destinationInput_mobile").on("click",function(){$(".packageSearch__destinationInput",".packageSearch__destinationInput_mobile").autocomplete("hide");$(".packageSearch__destinationInput_mobile").removeClass("show");n.preventpagescroll.remove()});var h=function(n,i){t.packageSearchModel(n,"destination");i.val(n.value);i.attr("dataid",n.data.DataId);i.attr("destinationid",n.data.Id);i.attr("countryid",t.getCountryId(n.data));i.attr("areaid",t.getAreaId(n.data));i.attr("placeid",t.getPlaceId(n.data));i.attr("hotelid",t.getHotelId(n.data));i.attr("nearestAirports",t.getNearestAirports(n.data));var u=$(".departureDateTimePickerContainer",r),f=$(".packageSearch__departureDateTimePickerInput",u),o=t.modelpool.DateRange||0;e=!0;t.getAvailableDates(f,o,!1)},o=function(n){setTimeout(function(){var i=n.data("firstSuggestion");if(_.isEmpty(i)||_.isEmpty(n.val())){n.val("");n.removeAttr("dataid");n.removeAttr("countryid");n.removeAttr("areaid");n.removeAttr("placeid");n.removeAttr("hotelid");n.removeAttr("nearestAirports");n.removeAttr("destinationid");n.closest(".destinationContainer").find(".autoComplete_SearchText").remove();var u=$(".departureDateTimePickerContainer",r),f=$(".packageSearch__departureDateTimePickerInput",u),e=t.modelpool.DateRange||0;t.getAllDates(f,e,t.getDefaultDatepickerOptions(),!1)}else n.attr("dataid")!==undefined||(h(i,n),n.val(i.value))},1)},a=$(".addonButton",f),v=$(".modalActiveFlightProgram");a.on("click",function(){v.modal("show")})},getCountryId:function(n){return n.ModelType===1||n.ModelType==="country"?n.DataId:n.ModelType===6||n.ModelType==="area"?n.ParentDataId:n.ModelType===4||n.ModelType==="place"||n.ModelType===5||n.ModelType==="hotel"?n.TopDataId:void 0},getAreaId:function(n){return n.ModelType===1||n.ModelType==="country"?null:n.ModelType===6||n.ModelType==="area"?n.DataId:n.ModelType===4||n.ModelType==="place"?n.ParentDataId:n.ModelType===5||n.ModelType==="hotel"?null:void 0},getPlaceId:function(n){return n.ModelType===1||n.ModelType==="country"?null:n.ModelType===4||n.ModelType==="place"?n.DataId:n.ModelType===5||n.ModelType==="hotel"?n.ParentDataId:n.ModelType===6||n.ModelType==="area"?null:void 0},getNearestAirports:function(n){return n.NearestAirports===undefined||n.NearestAirports===null||n.NearestAirports.length===0?null:_.join(n.NearestAirports)},getHotelId:function(n){return n.ModelType===1||n.ModelType==="country"?null:n.ModelType===4||n.ModelType==="place"?null:n.ModelType===5||n.ModelType==="hotel"?n.DataId:n.ModelType===6||n.ModelType==="area"?null:void 0},departure:function(){var o=$(r),f=$(".departureContainer",o),i=$(".packageSearch__departureInput",f),u=$(".packageSearch__departureList",f),s=$(".packageSearch__departureListItem",u);$(document).on("click",function(t){if($(t.target).hasClass("departureContainer")||$(t.target).hasClass("packageSearch__departureInputContainer")||$(t.target).hasClass("packageSearch__addon-icon")){f.addClass("showlist");o.addClass("showlist");u.slideDown("fast");n.preventpagescroll.onlymobile();i.removeClass("validateError");i.popover("dispose");var r=i.attr("itemid");$("li",u).removeClass("selected");$("li[data-itemid="+r+"]",u).addClass("selected")}else $(t.target).hasClass("packageSearch__departureInput")||$(t.target).hasClass("packageSearch__departureList")||$(t.target).hasClass("departureLabel")||(u.slideUp("fast"),f.removeClass("showlist"),o.removeClass("showlist"),$("li",u).removeClass("selected"))});$("input").on("focus",function(t){if($(t.target).hasClass("packageSearch__departureInput")||$(t.target).hasClass("packageSearch__addon-icon")){i.val("");i.trigger("keyup");f.addClass("showlist");u.slideDown("fast");n.preventpagescroll.onlymobile();i.removeClass("validateError");i.popover("dispose");var r=i.attr("itemid");$("li",u).removeClass("selected");$("li[data-itemid="+r+"]",u).addClass("selected")}else u.slideUp("fast"),f.removeClass("showlist"),$("li",u).removeClass("selected")});$(".mobileclose",f).on("click",function(){u.slideUp("fast");f.removeClass("showlist");$("li",u).removeClass("selected")});s.on("click",function(){i.attr("itemid",$(this).data("itemid"));i.attr("itemname",$(this).data("itemname"));i.val($(this).data("itemname"));var u=$(this).data("itemid"),f=$(this).data("itemname"),o=[{Id:parseInt(u),Label:f}];t.packageSearchModel(o,"departure");var s=$(".departureDateTimePickerContainer",r),h=$(".packageSearch__departureDateTimePickerInput",s),c=t.modelpool.DateRange||0;e=!0;t.getAvailableDates(h,c,!1);t.createNights();n.preventpagescroll.remove()});i.on("blur",function(){t.packageSearchModel(null,"departure");n.preventpagescroll.remove()});i.on("keyup",function(){var n=$(this).val().toLowerCase();s.filter(function(){$(this).toggle(String($(this).text()).toLowerCase().indexOf(n)>-1)})})},departureDateTimePicker:function(){var f=$(".departureDateTimePickerContainer",r),i=$(".packageSearch__departureDateTimePickerInput",f),u;$.extend(s,t.getDefaultDatepickerOptions());i.daterangepicker(s,function(){}).on("apply.daterangepicker",function(n,t){t.element.val(t.startDate.format(t.locale.format));i.trigger("change")}).on("dateclicked.daterangepicker",function(){t.removeDatepickerValidationUI(i)});t.initTooltips();t.departureDateRangeHandler();t.departureFlightTypeHandler();i.off("focus").on("focus",function(){var r=t.modelpool.DateRange||0;n.preventpagescroll.onlymobile();i.data("daterangepicker").remove();i.data("availabledates",null);t.checkDestinationInput()?t.getAllDates(i,r,t.getDefaultDatepickerOptions()):t.getAvailableDates(i,r);i.off("cancel.daterangepicker").on("cancel.daterangepicker",function(){n.preventpagescroll.remove()});$(document).off("click",".mobileclose").on("click",".mobileclose",function(){n.preventpagescroll.remove();i.data("daterangepicker").hide()});i.on("change",function(){var i=$(".packageSearch__departureDateTimePickerInput",".container-tabItemWrap .departureDateTimePickerContainer"),r=i.val(),u;i.data("daterange",$("input[name=rangeSelection]").is(":checked")?3:0);t.renderDateUI(i,r);u=t.getActualDates(i.data("availabledates"),r,t.modelpool.DateRange);t.packageSearchModel(r,"selectedDate");t.packageSearchModel(i.data("daterange"),"dateRange");t.packageSearchModel(u.start,"beginDate");t.packageSearchModel(u.end,"endDate");t.createNights();n.preventpagescroll.remove()})});i.off("click").on("click",function(){$(".daterangepicker",r).css("display")==="none"&&$(".daterangepicker",r).slideDown("fast")});t.renderDateUI(i,"");u="";t.packageSearchModel(u,"selectedDate");t.packageSearchModel(0,"dateRange");t.packageSearchModel(u,"beginDate");t.packageSearchModel(u,"endDate");t.createNights()},initTooltips:function(){var n=document.getElementById("charterTooltip"),t=document.getElementById("regularTooltip");$stage==="sunmar"?(n.dataset.content=""+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.rangeSelectionCharterTooltip_Sunmar,t.dataset.content=""+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.rangeSelectionRegularTooltip_Sunmar):(n.dataset.content=""+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.rangeSelectionCharterTooltip,t.dataset.content=""+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.rangeSelectionRegularTooltip);$("[data-toggle='popover']").popover({trigger:"hover",html:!0,template:'<div class="filterIconPopover popover" role="tooltip"><div class="arrow"><\/div><div class="popover-body"><\/div><\/div>'})},getDefaultDatepickerOptions:function(){var n=$(".departureDateTimePickerContainer",r),i=$(".packageSearch__departureDateTimePickerInput",n);return{template:t.getDatepickerTemplate(),buttonClasses:"btn btn-primary",applyButtonClasses:"btn-primary",minDate:new Date,maxDate:!1,isPackageSearch:!0,singleDatePicker:!0,autoUpdateInput:!1,linkedCalendars:!0,showDropdowns:!1,autoApply:!1,parentEl:$(i).closest(".packagetour"),maxSpan:{days:l},isCustomDate:function(){return""},isInvalidDate:function(){return!1},locale:o}},departureDateRangeHandler:function(){$(".packagetour").on("change",".daterangepicker input[name=rangeSelection]",function(n){var i,r,u;n.stopPropagation();i=$(".packageSearch__departureDateTimePickerInput",".container-tabItemWrap .departureDateTimePickerContainer");r=i.val();i.data("daterange",$("input[name=rangeSelection]").is(":checked")?3:0);u=t.getActualDates(i.data("availabledates"),r,t.modelpool.DateRange);t.packageSearchModel(r,"selectedDate");t.packageSearchModel(i.data("daterange"),"dateRange");t.packageSearchModel(u.start,"beginDate");t.packageSearchModel(u.end,"endDate");t.createNights();i.data("daterangepicker").show();t.renderDateUI(i,r)})},filterResultByFlightType:function(){var n=[];return t.getFlightTypeFilter()===null?t.flightDatePickerResponse.Result.forEach(function(t){n.push(t)}):t.getFlightTypeFilter()===1?t.flightDatePickerResponse.Result.filter(function(i){(i.FlightType===1||i.FlightType===2)&&(!t.modelpool.isCharter&&t.modelpool.isRegular?n.push({FlightDate:i.FlightDate,FlightType:1}):n.push(i))}):t.flightDatePickerResponse.Result.filter(function(t){(t.FlightType===0||t.FlightType===2)&&n.push({FlightDate:t.FlightDate,FlightType:0})}),n},departureFlightTypeHandler:function(){$(".packagetour").off("change",".daterangepicker input[name=charterSelection]").on("change",".daterangepicker input[name=charterSelection]",function(n){var u,f;n.stopPropagation();var i=$(".packageSearch__departureDateTimePickerInput",".container-tabItemWrap .departureDateTimePickerContainer"),e=t.getLeftCalendarFirstDate(i),r=$("input[name=rangeSelection]").is(":checked")?3:0;i.data("ischarter",$(this).is(":checked"));i.data("isregular",$("input[name=regularSelection]").is(":checked"));t.packageSearchModel($(this).is(":checked"),"charter");t.checkDestinationInput()?(u=t.getDefaultDatepickerOptions(),t.getAllDates(i,r,u)):(f=t.filterResultByFlightType(),t.renderDatePicker(i,r,{IsSuccess:t.flightDatePickerResponse.IsSuccess,Result:f,ErrorMessage:t.flightDatePickerResponse.ErrorMessage},e),setTimeout(function(){t.showDatePicker(i,!0)},100))});$(".packagetour").off("click",".daterangepicker .drp-ranges label span").on("click",".daterangepicker .drp-ranges label span",function(n){return n.stopPropagation(),!1});$(".packagetour").off("change",".daterangepicker input[name=regularSelection]").on("change",".daterangepicker input[name=regularSelection]",function(n){var u,f;n.stopPropagation();var i=$(".packageSearch__departureDateTimePickerInput",".container-tabItemWrap .departureDateTimePickerContainer"),e=t.getLeftCalendarFirstDate(i),r=$("input[name=rangeSelection]").is(":checked")?3:0;i.data("isregular",$(this).is(":checked"));i.data("ischarter",$("input[name=charterSelection]").is(":checked"));t.packageSearchModel($(this).is(":checked"),"regular");t.checkDestinationInput()?(u=t.getDefaultDatepickerOptions(),t.getAllDates(i,r,u)):(f=t.filterResultByFlightType(),t.renderDatePicker(i,r,{IsSuccess:t.flightDatePickerResponse.IsSuccess,Result:f,ErrorMessage:t.flightDatePickerResponse.ErrorMessage},e),setTimeout(function(){t.showDatePicker(i,!0)},100))});$(".charterSelectionWrapper, .regularSelectionWrapper",".daterangepicker").find("label").on("click",function(n){n.stopPropagation()})},checkDestinationInput:function(){return $(".packageSearch__departureInput").val()===""||_.isNil($(".packageSearch__departureInput").val())||$(".packageSearch__destinationInput").val()===""||_.isNil($(".packageSearch__destinationInput").val())},getDatepickerTemplate:function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return n&&t&&(n=!1,t=!1),'<div class="daterangepicker">\n          <div class="header">\n            <div class="title">'+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.title+'<\/div>\n            <div class="mobileclose"><i class="material-icons">&#xe5cd<\/i><\/div>\n          <\/div>\n          <div class="datetimepicker-toggle">\n            <div class="drp-ranges">\n              <div class="rangeSelectionWrapper">\n                <input type="checkbox" id="rangeSelection" name="rangeSelection" />\n                <label for="rangeSelection">\n                  '+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.rangeLabel+'\n                <\/label>\n              <\/div>\n              <div class="charterSelectionWrapper">\n                <input type="checkbox" id="charterSelection" name="charterSelection" '+(n?"checked":"")+' />\n                <label for="charterSelection">\n                  '+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.charterLabel+'\n                  <span class="d-inline-block" id="charterTooltip" tabindex="0" data-toggle="popover" data-placement="top"\n                  data-content="">\n                    <i class="material-icons">&#xe887<\/i>\n                  <\/span>\n                <\/label>\n              <\/div>\n              <div class="regularSelectionWrapper">\n                <input type="checkbox" id="regularSelection" name="regularSelection" '+(t?"checked":"")+' />\n                <label for="regularSelection">\n                  '+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.regularLabel+'\n                  <span class="d-inline-block"  id="regularTooltip" tabindex="0" data-toggle="popover" data-placement="top"\n                  data-content="">\n                    <i class="material-icons">&#xe887<\/i>\n                  <\/span>\n                <\/label>\n              <\/div>\n            <\/div>\n            <div class="drp-calendar left">\n              <div class="calendar-table"><\/div>\n              <div class="calendar-time"><\/div>\n            <\/div>\n            <div class="drp-calendar right">\n              <div class=""><\/div>\n              <div class="calendar-table"><\/div>\n              <div class="calendar-time"><\/div>\n            <\/div>\n            <div class="clearfix"><\/div>\n            <div class="drp-footer">\n              <div class="float-right drp-buttons">\n                <button class="applyBtn" type="button">'+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.btnApplyDates+"<\/button>\n              <\/div>\n            <\/div>\n          <\/div>\n        <\/div>"},getAllDates:function(n,i,r){var u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:!0;$.extend(s,r);n.daterangepicker(s,function(){}).on("apply.daterangepicker",function(t,i){i.element.val(i.startDate.format(i.locale.format));n.trigger("change")}).on("dateclicked.daterangepicker",function(){t.removeDatepickerValidationUI(n)});t.initTooltips();$("input",".rangeSelectionWrapper").prop("checked",parseInt(i)===3);$('input[name="charterSelection"]',".daterangepicker").prop("checked",t.modelpool.isCharter);$('input[name="regularSelection"]',".daterangepicker").prop("checked",t.modelpool.isRegular);u&&n.data("daterangepicker").show()},showDatePickerSpinner:function(n){var t=$("#departureDateRangePickerInput"),i=$("#departureDateTimePickerSpinner");n?(t.addClass("spinner-opacity"),i.addClass("packageSearch__departureDateTimePickerSpinner")):(t.removeClass("spinner-opacity"),i.removeClass("packageSearch__departureDateTimePickerSpinner"))},getAvailableDates:function(i,r){var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!0;t.showDatePickerSpinner(!0);setTimeout(function(){$.ajax({type:"get",url:n.getApplicationURL("/v1/flight/availablealldatev2"),data:{fromAreaId:parseInt($(".packageSearch__departureInput").attr("itemid")),toCountryId:parseInt($(".packageSearch__destinationInput").attr("countryid")),toAreaId:$(".packageSearch__destinationInput").attr("areaid"),destinationId:$(".packageSearch__destinationInput").attr("destinationid"),nearestAirports:$(".packageSearch__destinationInput").attr("nearestAirports")},datatype:"json",success:function(n){var u=JSON.stringify(n);t.renderDatePicker(i,r,JSON.parse(u));t.flightDatePickerResponse=JSON.parse(u)}}).then(function(){t.showDatePicker(i,u);t.showDatePickerSpinner(!1)})},10)},getLeftCalendarFirstDate:function(n){var t=n.data("daterangepicker");return t.leftCalendar!=null&&t.leftCalendar.calendar!=null&&t.leftCalendar.calendar.firstDay!=null?moment(t.leftCalendar.calendar.firstDay).format("DD.MM.YYYY"):""},getRightCalendarFirstDate:function(n){var t=n.data("daterangepicker");return t.rightCalendar!=null&&t.rightCalendar.calendar!=null&&t.rightCalendar.calendar.firstDay!=null?moment(t.rightCalendar.calendar.firstDay).format("DD.MM.YYYY"):""},getDatepickerSelectedDate:function(n){var t=n.data("daterangepicker");return t!=null&&t.startDate!=null?t.startDate.format(t.locale.format):null},renderDatePicker:function(n,i,r,u){var p=new Date,h,a,v,y,nt,k;p.setDate(p.getDate());var w=n.val(),f=[],d=new Map;if(!_.isNil(r)){var b=_.find(r.Result,["FlightType",0])!==undefined||_.find(r.Result,["FlightType",2])!==undefined,g=_.find(r.Result,["FlightType",1])!==undefined,s=r.Result,tt=c;e&&b?(s=_.filter(r.Result,function(n){return(n.FlightType===1)?!1:(n.FlightType=0,!0)}),r.Result.length!==s&&(t.modelpool.isCharter=!0,t.modelpool.isRegular=!1)):e&&!b&&g?(s=_.filter(r.Result,function(n){return n.FlightType===1}),r.Result.length!==s&&(t.modelpool.isCharter=!1,t.modelpool.isRegular=!0)):tt?(s=[],t.getFlightTypeFilter()===null?s=r.Result:t.getFlightTypeFilter()===1?r.Result.filter(function(n){(n.FlightType===1||n.FlightType===2)&&(!t.modelpool.isCharter&&t.modelpool.isRegular?s.push({FlightDate:n.FlightDate,FlightType:1}):s.push(n))}):r.Result.filter(function(n){(n.FlightType===0||n.FlightType===2)&&s.push({FlightDate:n.FlightDate,FlightType:0})})):r.Result.length!==0?s=t.filterResultByFlightType():(t.modelpool.isCharter=!1,t.modelpool.isRegular=!1);_.forEach(s,function(n){var t=moment(n.FlightDate,"x").format("DD.MM.YYYY");f.push(t);d.set(t,n.FlightType)});h=moment(p).format("DD.MM.YYYY");_.isNil(w)||w===""||(h=w);f.length>0?_.indexOf(f,h)===-1&&(h=f[0],i=0):h="";a={template:t.getDatepickerTemplate(b,g),buttonClasses:"btn btn-primary",applyButtonClasses:"btn-primary",minDate:new Date,maxDate:!1,isPackageSearch:!0,singleDatePicker:!0,autoUpdateInput:!1,showDropdowns:!1,linkedCalendars:!0,autoApply:!1,parentEl:$(n).closest(".packagetour"),locale:o,maxSpan:{days:l},isCustomDate:function(n){var t=new Map([[0,"charterFlightDate"],[1,"regularFlightDate"],[2,"bothFlightTypeDate"]]),i=moment(n,"x").format("DD.MM.YYYY"),r=d.get(i);return t.get(r)||""},isInvalidDate:function(n){var i=moment(n).format("DD.MM.YYYY"),t=!0;return $.each(f,function(n,r){if(r===i)return t=!1,!0}),t}};h!==""&&(a.startDate=h);v=t.getDatepickerSelectedDate(n);v!=null&&(f.length>0?_.indexOf(f,v)===-1&&(i=0):v=null);v==null?(y="",u!=null&&(y=u,f.length>0?_.indexOf(f,y)===-1&&(i=0):y=""),y!==""&&(a.startDate=y)):a.startDate=v;r.Result.length===0&&(nt=new Date,a.startDate=moment(nt).format("DD.MM.YYYY"));a.leftCalendarStartDate=u==null?null:u;$.extend(_DATEPICKER_DEFAULTS,a);n.daterangepicker(_DATEPICKER_DEFAULTS,function(){}).on("apply.daterangepicker",function(t,i){var r=i.startDate.format(i.locale.format);_.indexOf(f,r)===-1?i.element.val(""):i.element.val(r);n.trigger("change")});n.data("availabledates",f);n.data("daterange",i);$("input",".rangeSelectionWrapper").prop("checked",parseInt(i)===3);t.renderDateUI(n,h);k=t.getActualDates(f,h,i);t.packageSearchModel(h,"selectedDate");t.packageSearchModel(i,"dateRange");t.packageSearchModel(k.start,"beginDate");t.packageSearchModel(k.end,"endDate");t.departureDateRangeHandler();t.departureFlightTypeHandler()}},showDatePicker:function(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!0;i&&(n.data("daterangepicker").show(),$('input[name="charterSelection"]',".daterangepicker").prop("checked",t.modelpool.isCharter),$('input[name="regularSelection"]',".daterangepicker").prop("checked",t.modelpool.isRegular));e=!1;c=!1;t.initTooltips()},getActualDates:function(n,t,i){var r={start:t,end:t},u;return n?(u=_.indexOf(n,t),parseInt(i)===3&&(r.start=u<=2?n[0]:n[u-3],r.end=u>=n.length-3?n[n.length-1]:n[u+3])):parseInt(i)===3&&(r.start=moment(t,"DD.MM.YYYY").diff(moment(),"days",!0)<3?moment().format("DD.MM.YYYY"):moment(t,"DD.MM.YYYY").add(-3,"days").format("DD.MM.YYYY"),r.end=moment(t,"DD.MM.YYYY").add(3,"days").format("DD.MM.YYYY")),r},generateRangeText:function(n){var t="";return parseInt(n)===3&&(t='<span class="badge badge-success">'+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.rangeBadge3Days+"<\/span>"),t},renderDateUI:function(n,i){if(i==="")return n.val(""),n.closest("div").find("span").html("<em>Выберите дату<\/em>");t.removeDatepickerValidationUI(n);var r=t.generateRangeText(n.data("daterange")),u=moment(i,["DD.MM.YYYY","x",moment.ISO_8601]).format("DD.MM.YYYY")+r;return n.closest("div").find("span").html(u)},removeDatepickerValidationUI:function(n){n.removeClass("validateError");n.closest("div.departureDateTimePickerContainer").find("span").popover("dispose")},getFlightTypeFilter:function(){var i=t.modelpool.isCharter,r=t.modelpool.isRegular,n=null;return!i&&r&&(n=1),i&&!r&&(n=0),n},nights:function(i){var r=$(".nightsContainer",i),u=$(".packageSearch__NightsListContainer ",r);$(document).on("click",function(i){$(i.target).hasClass("packageSearch__NightsText")||$(i.target).hasClass("slctInputItem")||$(i.target).hasClass("btnNightsIcon")||$(i.target).hasClass("packageSearch__NightsInput_addon_icon")||$(i.target).hasClass("packageSearch__NightsInput")?(r.hasClass("firstRender")&&localStorage.getItem("sess_ps")===null&&_.isNil($(".container-tabItemWrap").data("searchparams").PackageSearchQuery)&&(t.setNights([]),r.removeClass("firstRender")),t.createNights(),u.slideToggle("fast"),$(".pageloading").css("display","none"),r.toggleClass("listshow"),n.preventpagescroll.onlymobile()):$(i.target).hasClass("nightItem")||$(i.target).hasClass("selectedNights")||$(i.target).hasClass("packageSearch__NightsListContainer")||$(i.target).hasClass("nightsListFooter")||$(i.target).hasClass("notAvaiableFlights")||$(i.target).hasClass("nightsListHeader")||$(i.target).hasClass("nightsListBody")||$(i.target).hasClass("packageSearch__NightsList")||$(i.target).hasClass("btnSelectNights")||$(i.target).hasClass("btnSelectNightsFooter")||$(i.target).hasClass("spanDateforNights")||(u.slideUp("fast"),r.removeClass("listshow"));($(i.target).hasClass("mobileclose")||$(i.target).closest(".mobileclose").length>0||$(i.target).hasClass("btnSelectNightsFooter"))&&n.preventpagescroll.remove()});$(".nightsContainer").on("click",".nightItem:not(.flight-off)",function(){var n=t.getNights();if($(this).hasClass("selected"))_.pull(n,$(this).text(),parseInt($(this).text()));else{if(n.length>=8)return alert(i18n_en.partials.searchTabs.packageSearch.errorMessages.nightMaxText+""),!1;n.push(parseInt($(this).text()))}t.setNights(n.sort(function(n,t){return parseInt(n)-parseInt(t)}))});$(".btnSelectNightsFooter",".nightsContainer").on("click",function(){$(".nightsContainer").removeClass("listshow");$(".packageSearch__NightsListContainer",".nightsContainer").slideUp("fast");n.preventpagescroll.remove()})},createNights:function(){var i=function(n){if(n!==undefined){var r="",i=void 0;n===null&&(n=[]);t.modelpool.Acc===undefined?(i=[7,8,9,10,11,12,13,14],t.modelpool.Acc=i):i=n.length>0?_.intersection(t.modelpool.Acc,n):t.modelpool.Acc;_.times(30,function(t){var i=t+1,u=_.indexOf(n,i)===-1?" flight-off":"";r+='<div class="nightItem'+u+'" data-night="'+t+'">'+i+"<\/div>"});$("> div",".packageSearch__NightsList").html(r);i!==t.modelpool.Acc&&t.setNights(i,n)}};_.isNil(t.modelpool.Departures)?$("div[data-enabledacc]").length>0&&$("div[data-searchparams]").data("searchparams")===""?(i($("div[data-enabledacc]").data("enabledacc")),$("div[data-enabledacc]").removeAttr("data-enabledacc")):i([7,14]):$("div[data-enabledacc]").length<=0?$.ajax({method:"get",url:n.getApplicationURL("/v1/flight/availablenights"),data:{fromAreaId:t.modelpool.Departures[0].Id,destinationId:t.modelpool.Destination!==undefined&&t.modelpool.Destination!==null?t.modelpool.Destination[0].Id:0,toCountryId:t.modelpool.Destination!==undefined&&t.modelpool.Destination!==null?t.getCountryId(t.modelpool.Destination[0]):0,toAreaId:t.modelpool.Destination!==undefined&&t.modelpool.Destination!==null?t.getAreaId(t.modelpool.Destination[0]):null,toPlaceId:t.modelpool.Destination!==undefined&&t.modelpool.Destination!==null?t.getPlaceId(t.modelpool.Destination[0]):null,nearestAirports:t.modelpool.Destination!==undefined&&t.modelpool.Destination!==null?t.getNearestAirports(t.modelpool.Destination[0]):null,beginDate:t.modelpool.BeginDate,endDate:t.modelpool.EndDate,flightType:t.getFlightTypeFilter()},datatype:"json",success:function(n){i(n.Result)}}):(i($("div[data-enabledacc]").data("enabledacc")),$("div[data-enabledacc]").removeAttr("data-enabledacc"))},setNights:function(t,i){if(i&&t===[]&&(t=[i[0]]),t!==undefined){$("input.packageSearch__NightsInput",".nightsContainer").val(n.nightmethods.arraytostring(t));var r="";t.length<=0?$(".selectedNights",".nightsContainer").empty():(_.forEach(t,function(n){r+="<span>"+n+"<\/span>"}),$(".selectedNights",".nightsContainer").html(r));this.selectNights(t);this.packageSearchModel(t,"nights")}},getNights:function(){var t=$("input.packageSearch__NightsInput",".nightsContainer").val();return t!==""?n.nightmethods.stringtoarray(t):[]},selectNights:function(n){$(".packageSearch__NightsList > div > .nightItem").removeClass("selected");_.forEach(n,function(n){$(".packageSearch__NightsList > div > .nightItem:eq("+(n-1)+")").addClass("selected")})},passenger:function(i){var y=$(".passengersContainer",i),v=$(".packageSearch__passengerListContainer",y),c=$(".adultContainer",v),r=$(".adultInput",c),l=9,a=1,s=$(".childContainer",v),e=$(".childInput",s),h=3,o=0,p=function(){$(".adultUp",c).off("click").on("click",function(){var n=parseInt(r.val()),i=void 0;i=n>=l?n:n+1;r.val(i);t.updatePassengerInputText(r.val(),e.val());t.packageSearchModel(r.val(),"adult")});$(".adultInput",c).on("focusout",function(){f.checkinput($(this),a,l);t.updatePassengerInputText(r.val(),e.val());t.packageSearchModel(r.val(),"adult")});$(".adultInput",c).on("keypress keyup keydown",function(){var n=new RegExp("^[0-9]{0,9}$");n.test($(this).val())||($(this).val(""),$(this).val(0),t.updatePassengerInputText(r.val(),e.val()));$(this).val().length>l?($(this).val(l),t.updatePassengerInputText(r.val(),e.val())):$(this).val().length<a&&($(this).val(a),t.updatePassengerInputText(r.val(),e.val()));f.checkinput($(this),a,l);t.updatePassengerInputText(r.val(),e.val());t.packageSearchModel(r.val(),"adult")});$(".adultDown",c).off("click").on("click",function(){var n=$(".adultInput",c),i=parseInt(n.val()),r=void 0;r=i<=a?i:i-1;n.val(r);t.updatePassengerInputText(n.val(),e.val());t.packageSearchModel(n.val(),"adult")})},w=function(){$(".childUp",s).off("click").on("click",function(){var n=parseInt(e.val()),i=void 0;i=n>=h?n:n+1;e.val(i);u(i);t.updatePassengerInputText(r.val(),e.val())});$(".childInput",s).on("change",function(){parseInt(e.val())<=o&&(e.val(o),u(o),t.updatePassengerInputText(r.val(),e.val()));f.checkinput($(this),o,h);u(e.val());t.updatePassengerInputText(r.val(),e.val())});$(".childInput",s).on("focusout",function(){u(parseInt($(this).val()));f.checkinput($(this),o,h);t.updatePassengerInputText(r.val(),e.val())});$(".childInput",s).on("keypress keyup keydown",function(){var n=new RegExp("^[0-9]{0,9}$");n.test($(this).val())||($(this).val(""),$(this).val(o),u(o),t.updatePassengerInputText(r.val(),e.val()));$(this).val().length>h?($(this).val(h),u(h),t.updatePassengerInputText(r.val(),e.val())):$(this).val().length<o&&($(this).val(o),u(o),t.updatePassengerInputText(r.val(),e.val()));f.checkinput($(this),o,h);t.updatePassengerInputText(r.val(),e.val())});$(".childDown",s).off("click").on("click",function(){var n=$(".childInput",s),i=parseInt(n.val()),f=void 0;f=i<=o?i:i-1;n.val(f);u(f);t.updatePassengerInputText(r.val(),n.val())})},b=function(){$(document).on("click",function(t){$(t.target).hasClass("packageSearch__passengersInput")||$(t.target).hasClass("packageSearch__passenger-addon-icon")||$(t.target).hasClass("packageSearch__passengerInputContainer")?(v.slideToggle("fast"),y.toggleClass("listshow"),n.preventpagescroll.onlymobile()):$(t.target).hasClass("packageSearch__passengerListContainer")||$(t.target).hasClass("passengerContainerRow")||$(t.target).hasClass("passengerContainerCol")||$(t.target).hasClass("adultContainer")||$(t.target).hasClass("adultInput")||$(t.target).hasClass("adultDown")||$(t.target).hasClass("adultUp")||$(t.target).hasClass("adultUpIcon")||$(t.target).hasClass("adultDownIcon")||$(t.target).hasClass("adultLabel")||$(t.target).hasClass("childLabel")||$(t.target).hasClass("childInput")||$(t.target).hasClass("childUp")||$(t.target).hasClass("childDown")||$(t.target).hasClass("childDownIcon")||$(t.target).hasClass("childUpIcon")||$(t.target).hasClass("childContainer")||$(t.target).hasClass("childAgeContainer")||$(t.target).hasClass("childAgeLabel")||$(t.target).hasClass("childAgeInput")||$(t.target).hasClass("childAgeUp")||$(t.target).hasClass("childAgeDown")||$(t.target).hasClass("childAgeUpIcon")||$(t.target).hasClass("childAgeDownIcon")||$(t.target).hasClass("childAgeMain")||(v.slideUp("fast"),y.removeClass("listshow"));($(t.target).hasClass("mobileclose")||$(t.target).hasClass("btnSelectPassengers"))&&n.preventpagescroll.remove();$(window).on("scroll",function(){})})};t.updatePassengerInputText(r.val(),e.val());p();w();b();t.packageSearchModel(r.val(),"adult")},updatePassengerInputText:function(n,t){var r=$(".passengersContainer"),u=$(".packageSearch__passengersInput",r),f,i,e,o;if(n=parseInt(n),t=parseInt(t),f="",i="",f=n<2?t<2?t===0?n+" "+i18n_en.partials.searchTabs.packageSearch.passenger.adultShort:n+" "+i18n_en.partials.searchTabs.packageSearch.passenger.adultShort+", "+t+" "+i18n_en.partials.searchTabs.packageSearch.passenger.childShort:n+" "+i18n_en.partials.searchTabs.packageSearch.passenger.adultShort+", "+t+" "+i18n_en.partials.searchTabs.packageSearch.passenger.childrenShort:t<2?t===0?n+" "+i18n_en.partials.searchTabs.packageSearch.passenger.adultsShort:n+" "+i18n_en.partials.searchTabs.packageSearch.passenger.adultsShort+", "+t+" "+i18n_en.partials.searchTabs.packageSearch.passenger.childShort:n+" "+i18n_en.partials.searchTabs.packageSearch.passenger.adultsShort+", "+t+" "+i18n_en.partials.searchTabs.packageSearch.passenger.childrenShort,n<=2&&t<=2){for(e=0;e<n;e++)i+='<i class="icon-person"><\/i>';for(o=0;o<t;o++)i+='<i class="icon-person child"><\/i>'}else i+="<abbr>"+n+'<\/abbr><i class="icon-person"><\/i>',t>0&&(i+="<abbr>"+t+'<\/abbr><i class="icon-person child"><\/i>');u.val(f);$(u).next("span.iconPresentation").html(i);u.data("adult",n);u.data("child",t);$(".childInput",r).val()!=="0"?$(".passengerContainerChildTitle",r).show():$(".passengerContainerChildTitle",r).hide()},packageSearchModel:function(n,i){if(i==="destination")t.modelpool.Destination=n!==null?[n.data]:null;else if(i==="departure")t.modelpool.Departures=n;else if(i==="selectedDate")t.modelpool.SelectedDate=moment(n,"DD.MM.YYYY").format("YYYY-MM-DD");else if(i==="dateRange")t.modelpool.DateRange=n;else if(i==="beginDate")t.modelpool.BeginDate=moment(n,"DD.MM.YYYY").format("YYYY-MM-DD");else if(i==="endDate")t.modelpool.EndDate=moment(n,"DD.MM.YYYY").format("YYYY-MM-DD");else if(i==="nights"){var r=[];_.each(n,function(n){r.push(parseInt(n))});t.modelpool.Acc=r}else i==="adult"?t.modelpool.Guest.Adults=parseInt(n):i==="childAge"?t.modelpool.Guest.Children=n:i==="searchparam_guest"?(_.isNil(n.Children)&&(n.Children=[]),t.modelpool.Guest=n):i==="charter"?t.modelpool.isCharter=n||!1:i==="regular"&&(t.modelpool.isRegular=n||!1)},sendform:function(i){var r=this.packageSearchValidate(i),f,u,e;r.a===!0&&r.b===!0&&r.c===!0&&r.d===!0&&r.e===!0&&(n.travelloader.show(),$("input",".packagetour").attr("disabled","disabled"),$("input",".packagetour").addClass("disabled"),$(".packageSearch__NightsInput",".packagetour").addClass("disabled"),f=moment(new Date).add(30,"days").format("x"),localStorage.setItem("sess_ps",JSON.stringify({expired:f,data:t.modelpool})),u=t.modelpool.Destination[0].ModelType,u===5||u==="hotel"?(e=window.open(),$.ajax({type:"POST",url:n.getApplicationURL("/v1/package/search"),dataType:"JSON",data:t.modelpool,success:function(t){e.location.href=t;n.travelloader.hide();$("input",".packagetour").removeAttr("disabled","disabled");$("input",".packagetour").removeClass("disabled");$(".packageSearch__NightsInput",".packagetour").removeClass("disabled")},error:function(){n.travelloader.hide()}})):$.ajax({type:"POST",url:n.getApplicationURL("/v1/package/search"),dataType:"JSON",data:t.modelpool,success:function(n){window.location.href=n},error:function(){n.travelloader.hide()}}))},packageSearchValidate:function(n){var i=$(".destinationContainer .packageSearch__destinationInput",n),r=$(".departureContainer .packageSearch__departureInput",n),f=$(".departureDateTimePickerContainer .packageSearch__departureDateTimePickerInput",n),u=$(".passengersContainer .packageSearch__passengersInput",n),e=$(".nightsContainer .packageSearch__NightsInput",n),v=!1,y=!1,p=!1,s=!1,w=!1,b=[],k,h,o,c,l,a;f.off("change").on("change",function(){c()});e.off("change").on("change",function(){o()});$(document).on("click",".nightItem:not(.flight-off)",function(){o()});r.off("change").on("change",function(){l()});i.off("change").on("change",function(){a()});u.off("change").on("change",function(){h()});f.off("focusout").on("focusout",function(){c()});e.off("focusout").on("focusout",function(){o()});r.off("focusout").on("focusout",function(){l()});i.off("focusout").on("focusout",function(){a()});u.off("focusout").on("focusout",function(){h()});k=function(n){var t=[],i=$(".childAgeInput",n);return _.forEach(i,function(n){t.push($(n).val())}),t};h=function(){var n=k();n.length>0?(u.popover({toggle:"popover",placement:"top",trigger:"focus",content:i18n_en.partials.searchTabs.packageSearch.passenger.popoverChildAge,template:'<div class="passenger-validate-error-popover popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-header"><\/h3><div class="popover-body"><\/div><\/div>'}),b=_.filter(n,function(n){return n==="0"}),b.length>0?(u.addClass("validateError"),u.popover("show"),s=!1):(u.removeClass("validateError"),u.popover("dispose"),s=!0)):(s=!0,u.hasClass("validateError")&&(u.removeClass("validateError"),u.popover("dispose")))};h();o=function(){_.isNil(e.val())||e.val()===""?(e.addClass("validateError"),e.popover({toggle:"popover",placement:"top",trigger:"focus",content:i18n_en.partials.searchTabs.packageSearch.errorMessages.nightPopup,template:'<div class="night-validate-error-popover popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-header"><\/h3><div class="popover-body"><\/div><\/div>'}),e.popover("show"),w=!1):(e.removeClass("validateError"),e.popover("dispose"),w=!0)};o();c=function(){(_.isNil(f.val())||f.val()==="")&&!moment(t.modelpool.SelectedDate).isValid()?(f.addClass("validateError"),f.closest("div.departureDateTimePickerContainer").find("span").popover({toggle:"popover",placement:"top",trigger:"manual",content:i18n_en.partials.searchTabs.packageSearch.errorMessages.datepickerValidationPopup,template:'<div class="datepicker-validate-error-popover popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-header"><\/h3><div class="popover-body"><\/div><\/div>'}),f.closest("div.departureDateTimePickerContainer").find("span").popover("show"),p=!1):(t.removeDatepickerValidationUI(f),p=!0)};c();l=function(){_.isNil(r.val())||r.val()===""?(r.addClass("validateError"),r.popover({toggle:"popover",placement:"top",trigger:"focus",content:i18n_en.partials.searchTabs.packageSearch.errorMessages.departurePopup,template:'<div class="departure-validate-error-popover popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-header"><\/h3><div class="popover-body"><\/div><\/div>'}),r.popover("show"),y=!1):(r.removeClass("validateError"),r.popover("dispose"),y=!0)};l();a=function(){_.isNil(i.val())||i.val()===""?(i.addClass("validateError"),i.popover({toggle:"popover",placement:"top",trigger:"focus",content:i18n_en.partials.searchTabs.packageSearch.destination.popoverError,template:'<div class="destination-validate-error-popover popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-header"><\/h3><div class="popover-body"><\/div><\/div>'}),i.popover("show"),v=!1):(i.removeClass("validateError"),i.popover("dispose"),v=!0)};a();$(document).on("click",function(n){$(n.target).hasClass("packageSearch__destinationInput")||!$(n.target).hasClass("packageSearch__departureInput")||$(n.target).hasClass("packageSearch__departureDateTimePickerInput")||$(n.target).hasClass("btnSubmitPackageSearch")||(i.popover("hide"),r.popover("hide"),f.popover("hide"))});return{a:v,b:y,c:p,d:s,e:w}}},u=function(n){var y=function(){var e=$(".childAgeContainer",s),n=18,r=0,u;$(".childAgeUp",e).off("click").on("click",function(){var i=$(this).closest(".passengerContainerCol").find(".childAgeInput"),t=parseInt(i.val()),r=void 0;r=t>=n?t:t+1;i.val(r);u()});$(".childAgeInput",e).on("focusout",function(){f.checkinput($(this),r,n);u()});$(".childAgeInput",e).on("keypress keyup keydown",function(){var t=new RegExp("^[0-9]{0,9}$");t.test($(this).val())||($(this).val(""),$(this).val(0));$(this).val().length>n?$(this).val(n):$(this).val().length<r&&$(this).val(r);f.checkinput($(this),r,n);u()});$(".childAgeDown",e).off("click").on("click",function(){var t=$(this).closest(".passengerContainerCol").find(".childAgeInput"),n=parseInt(t.val()),i=void 0;i=n<=r?n:n-1;t.val(i);u()});u=function(){var n,r,u;$(".childAge1",i).val()!==undefined&&(n=$(".childAge1",i),h[0]=$(".childAgeInput",n).val());$(".childAge2",i).val()!==undefined&&(r=$(".childAge2",i),h[1]=$(".childAgeInput",r).val());$(".childAge3",i).val()!==undefined&&(u=$(".childAge3",i),h[2]=$(".childAgeInput",u).val());t.packageSearchModel(h,"childAge")}},o=$(".passengersContainer"),s=$(".packageSearch__passengerListContainer",o),i=$(".passengerContainerRow",s),r=$(".childAgeContainer",i),c,u,l,a,e,v;if(n<=3){if(r.length<n)for(c=n-r.length,u=1;u<=c;u++)l=t.modelpool.Guest.Children[r.length+u-1]!==undefined?t.modelpool.Guest.Children[r.length+u-1]:0,a='\n            <div class="passengerContainerCol childAgeMain childAge'+(r.length+u)+' col-6">\n              <label for="childAgeInput" class="childAgeLabel">'+i18n_en.partials.searchTabs.packageSearch.passenger.childShort+" "+(r.length+u)+'<\/label>\n              <div class="childAgeContainer input-group">\n                <span class="childAgeDown d-inline-block input-group-prepend"><i class="childAgeDownIcon material-icons">&#xe15b<\/i><\/span>\n                <input type="text" class="childAgeInput d-inline-block form-control" value="'+l+'">\n                <span class="childAgeUp d-inline-block input-group-prepend"><i class="childAgeUpIcon material-icons">&#xe145<\/i><\/span>\n              <\/div>\n            <\/div>\n            ',i.append(a),y();else $(".childAgeMain:eq("+n+"), .childAgeMain:gt("+n+")",i).remove(),r.length>n;e=[];v=$(".childAgeInput",o);_.forEach(v,function(n){e.push($(n).val())});t.packageSearchModel(e,"childAge")}},f={checkinput:function(n,t,i){n.val()>i?(n.val(i),u(i)):n.val()<t&&(n.val(t),u(t))}};return{init:function(){moduleFactory.registerModule(i,a)}}};return{getInstance:function(){return t||(t=r()),t}}}(),i=t.getInstance();i.init()}).call(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1]);"use strict";var $stage="coral",$gdsUrl="https://booking.coral.ru",$urlAppendix="",$ascr="6904f4248b219518cdd3c56ab1980bb8";(function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n})()({1:[function(){(function(n){(function(){var t=function(){var h="hotelsearchPartial",u=void 0,t=null,r={},f="DD.MM.YYYY",e=" - ",i={toFrontDate:function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:f;return moment(n).format(t)},toEndDate:function(n){return moment(n,f).format("YYYY-MM-DD")}},o=function(n,t){return i.toFrontDate(n)+e+i.toFrontDate(t)},s=function(){var t="sess_hotelsearch",i=localStorage.getItem(t),n;return i!==null?(n=JSON.parse(i),moment(n.expired,"x").format("x")<moment().format("x")?(localStorage.removeItem(t),null):moment(n.data.BeginDate,"x").format("x")<moment().format("x")&&moment(n.data.EndDate,"x").format("x")<moment().format("x")?(localStorage.removeItem(t),null):n):null},c=function(){var a=function(n){v.init(n);u.init(n);p.init(n);w.init(n);l.init(n);y(n)},v=function(){var t=function(t){$(t).on("click",".search-dropdown",function(){var i=$(this).closest(".search-dropdown-wrapper");i.hasClass("active")?(i.removeClass("active"),n.preventpagescroll.remove()):($(".search-dropdown-wrapper",t).removeClass("active"),i.addClass("active"),n.preventpagescroll.onlymobile());i.find(".search-dropdown-content").hasClass("no-covered-layout")||n.preventpagescroll.onlymobile()});$(document).on("click",function(i){var u=$(".search-dropdown-wrapper",t),r=$(i.target);u.hasClass("active")&&!r.hasClass("input-dropdown")&&!r.closest(".search-dropdown").length>0&&(r.hasClass("input-dropdown-content")||r.closest(".search-dropdown-content").length>0||u.removeClass("active"));r.hasClass("btnSelectPax")&&(u.removeClass("active"),n.preventpagescroll.remove())});$(".hotel-pax-wrapper",t).on("click",".mobileclose",function(){$(".btnSelectPax",t).trigger("click")});$(t).on("click",".btn-search",function(){k(t)})};return{init:function(n){return t(n)}}}(),y=function(n){var i,e,f;$(".container-tabItemWrap").data("searchparams").OnlyHotelQuery!==undefined&&(t=$(".container-tabItemWrap").data("searchparams").OnlyHotelQuery);i=moment().add(1,"days").format("YYYY-MM-DD");e=s();t===null&&e!==null&&(t=e.data,moment(t.BeginDate).isBefore(moment(i))?(t.BeginDate=moment(i),t.EndDate=moment(i).add(1,"days")):(t.BeginDate=moment(t.BeginDate,"YYYY-MM-DD"),t.EndDate=moment(t.EndDate,"YYYY-MM-DD")));f=null;_.isNil(t)||t===""?(f=o(i,moment(i).add(1,"days")),u.paxUpdate(n)):(f=o(t.BeginDate,t.EndDate),r.data=t.Destination,$(".location-destination",n).val(t.Destination.TitleRu),$(".pax-adult",n).val(t.Guest.Adults),$(".pax-child",n).val(t.Guest.Children.length),u.paxUpdate(n));$(".datepicker-range",n).val(f);t=null},p=function(){var t=function(t){var r=$(".datepicker-range",t),v=r.closest(".datepicker-wrapper"),u=i18n_en.daterangepicker.locale,c;u.format=f;u.direction="hotel_datepicker";u.applyLabel=i18n_en.partials.searchTabs.packageSearch.departureTimePicker.btnApplyDates;var a=function(n,t){var r=s();return r!==null?(r=r.data,r[t]?i.toFrontDate(new Date(r[t])):i.toFrontDate(n)):i.toFrontDate(n)},h=moment(new Date,u.format).add(1,"days"),y=moment(new Date(h),u.format).add(1,"days"),p={parentEl:v,buttonClasses:"btn btn-primary",locale:u,maxSpan:{days:30},minDate:h,maxDate:!1,opens:"right",autoUpdateInput:!1,applyButtonClasses:"applyBtn btn btn-sm btn-default",cancelButtonClasses:"d-none",startDate:a(h,"BeginDate"),endDate:a(y,"EndDate")};r.daterangepicker(p,function(n,t){r.val(o(n,t))});r.on("apply.daterangepicker",function(t,i){var f=i.startDate.format(u.format)+e+i.endDate.format(u.format);r.val(f);l.validateRequiredInput(r);n.preventpagescroll.remove()});r.off("dateclicked.daterangepicker").on("dateclicked.daterangepicker",function(n,t){c(r,t)});r.on("show.daterangepicker",function(n,t){c(r,t)});r.off("cancel.daterangepicker").on("cancel.daterangepicker",function(){n.preventpagescroll.remove()});c=function(t,i){var r,u;if(n.preventpagescroll.onlymobile(),r=t.closest(".datepicker-wrapper"),$(".drp-dates",r).length<1){$(".daterangepicker",r).prepend('<div class="drp-dates" />');$(".daterangepicker",r).prepend('<div class="header"><div class="title">Даты проживания<\/div><div class="mobileclose"><i class="material-icons">&#xe5cd<\/i><\/div><\/div>');$(".daterangepicker",r).find(".mobileclose").on("click",function(){t.data("daterangepicker").hide();n.preventpagescroll.remove()});$(".drp-buttons",r).prepend('<div class="notAvaiableDays">'+i18n_en.partials.searchTabs.packageSearch.departureTimePicker.notavaiable+"<\/div><\/div>")}$(".drp-checkin",r).length<1&&!_.isNil(i.startDate)&&$(".drp-dates",r).append('<span class="drp-dates-title">'+i18n_en.partials.searchTabs.hotelSearch.dates.checkin+'<\/span><div class="drp-checkin"><i class="material-icons">&#xe916<\/i><span><\/span><\/div>');$(".drp-checkout",r).length<1&&!_.isNil(i.endDate)&&$(".drp-dates",r).append('<span class="drp-dates-title">'+i18n_en.partials.searchTabs.hotelSearch.dates.checkout+'<\/span><div class="drp-checkout""><i class="material-icons">&#xe916<\/i><span><\/span><\/div>');_.isEmpty(i.startDate)||$(".drp-checkin span",r).html(i.startDate.format("DD.MM.YYYY"));!_.isEmpty(i.endDate)&&moment(i.endDate).isValid()?($(".drp-checkout span",r).html(i.endDate.format("DD.MM.YYYY")),$(".drp-checkout",r).show()):$(".drp-checkout",r).hide();_.isNil(i.startDate)||_.isNil(i.endDate)?($(".drp-nights",r).html(""),$(".drp-nights",r).hide()):($(".drp-nights",r).length<1&&$(".drp-dates",r).append('<span class="drp-dates-title">'+i18n_en.partials.searchTabs.hotelSearch.dates.nights+'<\/span><div class="drp-nights"><\/div>'),u=parseInt(moment(i.endDate,"DD.MM.YYYY").diff(moment(i.startDate,"DD.MM.YYYY"),"days",!0)),$(".drp-nights",r).html(u),$(".drp-nights",r).show())};$(t).on("click",".datepicker-icon",function(){var n=$(this).closest(".input-with-icon").find("input"),t=$(this).closest(".input-with-icon").find(".daterangepicker");t.is(":visible")||n.focus()})};return{init:function(n){return t(n)}}}(),w=function(){var t={5:"hotel",4:"location_on",1:"location_on"},i=function(i){var h=n.getApplicationURL("/v1/search/destinations"),u=$(".location-input",".hotelsearch"),c=3,l=i18n_en.partials.searchTabs.hotelSearch.noResult,a=300,v=u.hasClass("autocompleted"),s=$(".hotelSearch__destinationInput_mobile",i),f=!0,o,e;$(i).on("focus",".location-destination",function(){v||u.autocomplete({serviceUrl:h,paramName:"keyword",params:{type:"hotel"},dataType:"json",deferRequestBy:a,minChars:c,showNoSuggestionNotice:!1,autoSelectFirst:!0,triggerSelectOnValidInput:!1,noSuggestionNotice:l,appendTo:s,beforeRender:function(){u.removeAttr("dataid")},onSearchComplete:function(n,i){u.removeData("firstSuggestion");_.isEmpty(i)||(u.data("firstSuggestion",i[0]),i=$(".autocomplete-suggestion",s).each(function(n){var r=i[n].data,u=t[r.ModelType];$(this).prepend('<i class="material-icons">'+u+"<\/i>");_.isNil(r.ParentTitleRu)||$(this).append('<span class="titleru">'+r.ParentTitleRu+"<\/span>")}))},transformResult:function(n){return{suggestions:$.map(n.Results,function(n){return{value:_.isNil(n.TitleRu)?n.Title:n.TitleRu,data:n}})}},onSelect:function(t){o(t,u);f?($(".hotelSearch__destinationInput_mobile").removeClass("show"),n.preventpagescroll.remove(),$(this).trigger("blur")):($(".hotelSearch__destinationInput_mobile").addClass("show"),n.preventpagescroll.onlymobile());f=!0},onHide:function(){}})});u.on("focus",function(){e($(this));$(".hotelSearch__destinationInput_mobile").addClass("show");n.preventpagescroll.onlymobile();f=!1});u.on("blur",function(){e($(this));f=!0});u.on("keyup",function(){_.isEmpty($(this).val())&&e($(this));$(".hotelSearch__destinationInput_mobile").hasClass("show")||$(this).attr("dataid")!==undefined||($(".hotelSearch__destinationInput_mobile").addClass("show"),n.preventpagescroll.onlymobile())});$(".mobileclose",".hotelSearch__destinationInput_mobile").on("click",function(){$(".location-destination",".hotelSearch__destinationInput_mobile").autocomplete("hide");$(".hotelSearch__destinationInput_mobile").removeClass("show")});o=function(n,t){r=n;t.val(n.value);t.attr("dataid",n.data.DataId)};e=function(n){setTimeout(function(){var t=n.data("firstSuggestion");_.isEmpty(t)||_.isEmpty(n.val())?(u.val(""),n.removeAttr("dataid"),r={}):n.attr("dataid")!==undefined||(o(t,n),n.val(t.value))},1)}};return{init:function(n){return i(n)}}}(),u=function(){var r=function(t){$(t).on("click",".pax-spinner-up",function(){n($(this).closest(".pax-spinner"),"up");u.paxUpdate(t)});$(t).on("click",".pax-spinner-down",function(){n($(this).closest(".pax-spinner"),"down");u.paxUpdate(t)})},i=function(n,t){var i="";return t=parseInt(t),t>0&&(n==="adult"?i=t<2?i18n_en.partials.searchTabs.hotelSearch.paxCulture.Adult:i18n_en.partials.searchTabs.hotelSearch.paxCulture.AdultPlural:n==="child"&&(i=t<2?i18n_en.partials.searchTabs.hotelSearch.paxCulture.Child:i18n_en.partials.searchTabs.hotelSearch.paxCulture.ChildPlural)),i},n=function(n,t){var i={input:n.find(".pax-spinner-input"),min:n.data("spinner-min")||0,max:n.data("spinner-max")||9,val:parseInt(n.find(".pax-spinner-input").val())};t==="up"?i.val!==i.max&&i.input.val(i.val+1):t==="down"&&i.val!==i.min&&i.input.val(i.val-1)};return{init:function(n){return r(n)},paxText:function(n,t){return i(n,t)},spinUp:function(t){return n(t,"up")},spinDown:function(t){return n(t,"down")},paxUpdate:function(n){var r={input:$(".pax-input",n),adult:parseInt($(".pax-adult",n).val()),adultText:"",child:parseInt($(".pax-child",n).val()),childText:"",childAgesWrapper:$(".pax-child-ages-wrapper",n),childAges:$(".pax-child-ages",n),childAge:{item:$('<div class="pax-child-age w-50 " />'),select:$('<select class="pax-child-age-select required" data-error-message="'+i18n_en.partials.searchTabs.hotelSearch.paxCulture.ChildAgeError+'" />'),maxAge:$(".pax-child",n).data("max-age")||18,count:$(".pax-child-age",n).length}},u,s,h,f,o,c,l,e,a,v;if(r.adultText=r.adult>0?r.adult+" "+i("adult",r.adult):"",r.childText=r.child>0?", "+r.child+i("child",r.child):"",r.input.val(r.adultText+r.childText),u="",r.adult<=2&&r.child<=2){for(s=0;s<r.adult;s++)u+='<i class="icon-person"><\/i>';for(h=0;h<r.child;h++)u+='<i class="icon-person child"><\/i>'}else u+="<abbr>"+r.adult+'<\/abbr><i class="icon-person"><\/i>',r.child>0&&(u+="<abbr>"+r.child+'<\/abbr><i class="icon-person child"><\/i>');for($(r.input).next("span.iconPresentation").html(u),f=0;f<=r.childAge.maxAge;f++)r.childAge.select.append('<option value="'+(f===0?"":f)+'">'+f+"<\/option>");if(r.childAge.item.append(r.childAge.select.clone()),o=r.child-r.childAge.count,t!==null){if(c=t.Guest.Children,l=c.length,l>0)for(e=0;e<l;e++)r.childAges.append(r.childAge.item.clone()),r.childAges.find(".pax-child-age").last().prepend('<label class="w-100 d-block">'+i18n_en.partials.searchTabs.hotelSearch.paxCulture.ChildShort+" "+(e+1)+"<\/label>"),r.childAges.find("select:eq("+e+")").val(c[e])}else if(o>0)for(a=0;a<o;a++)r.childAges.append(r.childAge.item),r.childAges.find(".pax-child-age").last().prepend('<label class="w-100 d-block">'+i18n_en.partials.searchTabs.hotelSearch.paxCulture.ChildShort+" "+(r.childAges.find(".pax-child-age").last().index()+1)+"<\/label>");else for(v=0;v<Math.abs(o);v++)r.childAges.find(".pax-child-age").last().remove();r.child>0?r.childAgesWrapper.show():r.childAgesWrapper.hide()}}}(),b=function(n){var t={child:parseInt($(".pax-adult",n).val()),childAgeSelect:$(".pax-child-age-select",n),childAges:[]};t.child>0&&_.forEach(t.childAgeSelect,function(n){t.childAges.push(parseInt($(n).val()))});var u=$(".datepicker-range").val().split(e),f=u[0],o=u[1];return{Destination:r.data,BeginDate:i.toEndDate(f),EndDate:i.toEndDate(o),Guest:{Adults:parseInt($(".pax-adult",n).val()),Children:t.childAges}}},k=function(t){var i,u,r,f;l.validateRequiredModel(t)&&(n.travelloader.show(),i=b(t),i!==!1&&(u=moment(new Date).add(30,"days").format("x"),localStorage.setItem("sess_hotelsearch",JSON.stringify({expired:u,data:i})),r=i.Destination.ModelType,r===5||r==="hotel"?(f=window.open(),$.ajax({type:"POST",url:n.getApplicationURL("/v1/onlyhotel/search"),dataType:"JSON",data:i,success:function(t){f.location.href=t;n.travelloader.hide()},error:function(t){console.log(t);n.travelloader.hide()}})):$.ajax({type:"POST",url:n.getApplicationURL("/v1/onlyhotel/search"),dataType:"JSON",data:i,success:function(n){window.location.href=n},error:function(t){console.log(t);n.travelloader.hide()}})))},l=function(){var t=function(n){$(n).on("focus",".required",function(){c.remove($(this))})},n=function(n){var t=!0,i=n.data("error-message")||i18n_en.partials.searchTabs.hotelSearch.requiredErrorMessage;return _.isEmpty(n.val())?(t=!1,n.closest(".search-dropdown-wrapper").length>0?setTimeout(function(){n.closest(".search-dropdown-wrapper").addClass("active");c.add(n,i)},200):c.add(n,i)):c.remove(n),t},i=function(t){var i=!0;return $(".required",t).each(function(){n($(this))||(i=!1)}),i};return{init:function(n){return t(n)},validateRequiredInput:function(t){return n(t)},validateRequiredModel:function(n){return i(n)}}}(),c=function(){var n=function(n,t){n.addClass("validate-error");_.isEmpty(t)||(n.popover({toggle:"popover",placement:"top",trigger:"focus",content:t,container:n.closest("div"),template:'<div class="passenger-validate-error-popover popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-header"><\/h3><div class="popover-body"><\/div><\/div>'}),n.popover("show"))},t=function(n){n.removeClass("validate-error");n.closest("div").find(".popover").remove()};return{add:function(t,i){return n(t,i)},remove:function(n){return t(n)}}}();return{init:function(){moduleFactory.registerModule(h,a)}}};return{getInstance:function(){return u||(u=c()),u}}}(),i=t.getInstance();i.init()}).call(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1]);"use strict";var $stage="coral",$gdsUrl="https://booking.coral.ru",$urlAppendix="",$ascr="6904f4248b219518cdd3c56ab1980bb8";(function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n})()({1:[function(){(function(n){(function(){var t=function(){var u="flightsearchPartial",r=void 0,t=i18n_en.partials.searchTabs.flightSearch.paxCulture,i=new Date,f=function(){var h=function(n){c.init(n);l.init(n);a.init(n);v.init(n);s.init(n);r.init(n);y(n)},c=function(){var t=function(t){$(t).on("click",".search-dropdown",function(){var i=$(this).closest(".search-dropdown-wrapper");i.hasClass("active")?i.removeClass("active"):($(".search-dropdown-wrapper",t).removeClass("active"),i.addClass("active"));i.find(".search-dropdown-content").hasClass("no-covered-layout")||n.preventpagescroll.onlymobile()});$(document).on("click",function(i){var u=$(".search-dropdown-wrapper",t),r=$(i.target);u.hasClass("active")&&!r.hasClass("input-dropdown")&&!r.closest(".search-dropdown").length>0&&(r.hasClass("input-dropdown-content")||r.closest(".search-dropdown-content").length>0||u.removeClass("active"),r.hasClass("btnSelectPax")&&(u.removeClass("active"),n.preventpagescroll.remove()))});$(".flight-pax-wrapper",t).on("click",".mobileclose",function(){$(".btnSelectPax",t).trigger("click")});$(t).on("click",".search-option-class li",function(){$(this).siblings().removeClass("selected");$(this).addClass("selected");$(".search-option-class-text",t).text($(this).text())});$(t).on("change","[name=flight-type]",function(){var n=$(this).val(),i,r,u,f;$(".flightsearch").attr("data-flight-type",n);n==="MultiDestination"?(i=$(".flight-not-multi .flight-options-wrapper > div").detach(),i.appendTo($(".flight-multi .flight-options-wrapper")),r=$(".flight-not-multi .flight-pax-wrapper > div").detach(),r.appendTo($(".flight-multi .flight-pax-wrapper")),$(".flight-multi-item",t).length<2&&$(".btn-add-flight").trigger("click")):(u=$(".flight-multi .flight-options-wrapper > div").detach(),u.appendTo($(".flight-not-multi .flight-options-wrapper")),f=$(".flight-multi .flight-pax-wrapper > div").detach(),f.appendTo($(".flight-not-multi .flight-pax-wrapper")))});$(t).on("click",".btn-flight-add-roundtrip",function(){$("[name=flight-type][value=RoundTrip]",t).trigger("click");$(".datepicker-roundtrip-return",t).trigger("focus")});var i=$(".flight-multi-item").first()[0].outerHTML;$(t).on("click",".btn-add-flight",function(){if($(".flight-multi-item",t).length<5){var n=$(this).closest(".flight-multi").find(".flight-multi-item").last(),r=n.find(".datepicker-multi-departure").val();n.after(i);$(".flight-multi").find(".flight-multi-item").last().find(".datepicker-multi-departure").val(moment(r,"DD.MM.YYYY").add(1,"days").format("DD.MM.YYYY"));$(".flight-multi-title-num").each(function(){$(this).text($(this).closest(".flight-multi-item").index()+1)})}});$(t).on("click",".btn-remove-flight",function(){$(".flight-multi-item",t).length>2&&$(this).closest(".flight-multi-item").remove()});$(t).on("click",".btn-search",function(){b(t)})};return{init:function(n){return t(n)}}}(),l=function(){var t=function(t){var u=new Date,e=new Date(u.getFullYear()+10,u.getMonth(),u.getDate(),0,0,0,0),f;$(".datepicker-oneway-departure",t).val(moment(u).format("DD.MM.YYYY"));$(".datepicker-roundtrip-departure",t).val(moment(u).format("DD.MM.YYYY"));$(".datepicker-roundtrip-return",t).val(moment(u).format("DD.MM.YYYY"));$(".datepicker-multi-departure",t).first().val(moment(u).format("DD.MM.YYYY"));$(t).on("focus",".datepicker-oneway-departure",function(){var o=$(this),h=o.val()||!1,c=o.closest(".datepicker-wrapper"),s;if($(".flight_datepicker_oneway").length>0)$(".flight_datepicker_oneway").show();else{s=i18n_en.daterangepicker.locale;s.direction="flight_datepicker_oneway oneway";s.applyLabel=i18n_en.daterangepicker.locale.applyLabel;o.daterangepicker({parentEl:c,minDate:u,maxDate:e,autoUpdateInput:!0,autoApply:!0,opens:"right",singleDatePicker:!0,startDate:h,endDate:!1,locale:s},function(n){$(".datepicker-roundtrip-departure",t).val(n.format("DD.MM.YYYY"));$(".datepicker-roundtrip-return",t).val(n.format("DD.MM.YYYY"));i=n.format("DD.MM.YYYY");r.validateRequiredInput(o)});$(function(){$(".drp-calendar.right").show()});o.off("apply.daterangepicker").on("apply.daterangepicker",function(){n.preventpagescroll.remove()});o.off("cancel.daterangepicker").on("cancel.daterangepicker",function(){n.preventpagescroll.remove()});o.off("show.daterangepicker").on("show.daterangepicker",function(n,t){f(o,t)})}});$(t).on("focus",".datepicker-roundtrip-departure",function(){var o=$(this),h=o.closest(".datepicker-wrapper"),c=o.val()||!1,s=i18n_en.daterangepicker.locale;s.direction="flight_datepicker_roundtrip roundtrip";s.applyLabel=i18n_en.daterangepicker.locale.applyLabel;o.daterangepicker({parentEl:h,minDate:u,maxDate:e,opens:"right",autoUpdateInput:!1,singleDatePicker:!0,autoApply:!0,startDate:c,endDate:!1,locale:s},function(n){$(".datepicker-roundtrip-departure",t).val(n.format("DD.MM.YYYY"));var u=$(".datepicker-roundtrip-departure",t).val(),f=$(".datepicker-roundtrip-return",t).val();i=n.format("DD.MM.YYYY");$(".flight_datepicker_roundtrip_return").length>0&&u>f&&($(".datepicker-roundtrip-return",t).val(n.format("DD.MM.YYYY")),$(".datepicker-roundtrip-return",t).data("daterangepicker").setStartDate(n.format("DD.MM.YYYY")));r.validateRequiredInput(o)});$(function(){$(".drp-calendar.right").show()});o.off("apply.daterangepicker").on("apply.daterangepicker",function(){o.data("daterangepicker")&&o.data("daterangepicker").remove();n.preventpagescroll.remove();$(".datepicker-roundtrip-return",t).trigger("focus")});o.off("cancel.daterangepicker").on("cancel.daterangepicker",function(){o.data("daterangepicker")&&o.data("daterangepicker").remove();n.preventpagescroll.remove()});o.off("show.daterangepicker").on("show.daterangepicker",function(n,i){$(".datepicker-roundtrip-departure",t).data("daterangepicker").setStartDate($(".datepicker-roundtrip-departure",t).val());f(o,i)})});$(t).on("focus",".datepicker-roundtrip-return",function(){var u=$(this),s=u.closest(".datepicker-wrapper"),h=u.val()||!1,o=i18n_en.daterangepicker.locale;o.direction="flight_datepicker_roundtrip_return roundtrip";o.applyLabel=i18n_en.daterangepicker.locale.applyLabel;u.daterangepicker({parentEl:s,minDate:i,maxDate:e,opens:"right",autoUpdateInput:!1,singleDatePicker:!0,autoApply:!0,startDate:h,endDate:!1,locale:o},function(n){$(".datepicker-roundtrip-return",t).val(n.format("DD.MM.YYYY"));r.validateRequiredInput(u)});$(function(){$(".drp-calendar.right").show()});u.off("apply.daterangepicker").on("apply.daterangepicker",function(){u.data("daterangepicker")&&u.data("daterangepicker").remove();n.preventpagescroll.remove()});u.off("cancel.daterangepicker").on("cancel.daterangepicker",function(){u.data("daterangepicker")&&u.data("daterangepicker").remove();n.preventpagescroll.remove()});u.off("show.daterangepicker").on("show.daterangepicker",function(n,i){$(".datepicker-roundtrip-return",t).data("daterangepicker").setEndDate($(".datepicker-roundtrip-return",t).val());f(u,i)})});f=function(t){n.preventpagescroll.onlymobile();var i=t.closest(".datepicker-wrapper");$(".header",i).length<1&&$(".daterangepicker",i).prepend('<div class="header"><div class="title">Дата отправления<\/div><div class="mobileclose"><i class="material-icons">&#xe5cd<\/i><\/div><\/div>');$(".daterangepicker",i).find(".mobileclose").off("click").on("click",function(){t.data("daterangepicker").hide();n.preventpagescroll.remove()})};$(t).on("focus",".datepicker-multi-departure",function(){var t=$(this),s=t.closest(".datepicker-wrapper"),h=t.val()||!1,c=t.closest(".flight-multi-item").index(),u="flight_datepicker_multi_"+c,e=new Date,o=t.closest(".flight-multi-item").prev(".flight-multi-item"),i;o.length&&(e=moment(o.find(".datepicker-multi-departure").val(),"DD.MM.YYYY").toDate());i=i18n_en.daterangepicker.locale;u+=" oneway multi-departure";i.direction=u;i.applyLabel=i18n_en.daterangepicker.locale.applyLabel;t.daterangepicker({parentEl:s,buttonClasses:"btn btn-primary",minDate:e,maxDate:!1,autoUpdateInput:!0,applyButtonClasses:"applyBtn btn btn-sm btn-default",singleDatePicker:!0,autoApply:!0,opens:"left",startDate:h,endDate:!1,locale:i},function(n){var i=t.closest(".flight-multi-item").nextAll(".flight-multi-item");i.length&&i.each(function(){var t=$(this).find(".datepicker-multi-departure"),i=moment(t.val(),"DD.MM.YYYY").toDate();t.closest(".datepicker-wrapper").find(".daterangepicker").length>0&&(moment(n,"DD.MM.YYYY").diff(moment(i,"DD.MM.YYYY"),"days",!0)>0&&(t.data("daterangepicker").setStartDate(n),t.data("daterangepicker").setEndDate("")),t.data("daterangepicker").setMinDate(n))});r.validateRequiredInput(t)});$(function(){$(".drp-calendar.right").show()});t.off("apply.daterangepicker").on("apply.daterangepicker",function(){t.data("daterangepicker")&&t.data("daterangepicker").remove();n.preventpagescroll.remove()});t.off("cancel.daterangepicker").on("cancel.daterangepicker",function(){t.data("daterangepicker")&&t.data("daterangepicker").remove();n.preventpagescroll.remove()});t.off("show.daterangepicker").on("show.daterangepicker",function(n,i){f(t,i)})});$(t).on("click",".datepicker-icon",function(){var n=$(this).closest(".input-with-icon").find("input"),t=$(this).closest(".input-with-icon").find(".daterangepicker");t.is(":visible")||n.focus()})};return{init:function(n){return t(n)}}}(),a=function(){var t=function(t){var i=!0,f,u;$(t).on("focus",".location-input",function(){var t=$(this),e=t.hasClass("autocompleted"),r=$(this).closest(".location-mobile-layout"),u=t.closest(".location-inputs").find(".location-input").not(this);e||t.autocomplete({serviceUrl:$gdsUrl+"/api/Flight/FilterAirportsElastic",paramName:"term",dataType:"json",minChars:3,showNoSuggestionNotice:!1,noSuggestionNotice:i18n_en.partials.searchTabs.flightSearch.noResult,triggerSelectOnValidInput:!1,appendTo:r,autoSelectFirst:!0,beforeRender:function(){t.removeAttr("data-code");t.removeAttr("data-city-code");t.removeAttr("data-type");t.removeAttr("data-value")},onSearchComplete:function(n,i){if(t.removeData("first-suggestion"),!_.isEmpty(i)){var f=!1;i=r.find(".autocomplete-suggestion").each(function(n){var r=$(this),e=i[n].data,o="location_on";u.data("city-code")===e.CityCode?r.hide():f||(r.show(),t.data("first-suggestion",i[n]),f=!0);e.Type===0&&(o="&#xe905",r.addClass("airport"));r.prepend('<span class="material-icons">'+o+"<\/span>");r.append('<span class="autocomplete-flight-code">'+e.Code+"<\/span>");_.isNil(e.CityName)||_.isNil(e.CountryCode)||r.append('<span class="autocomplete-flight-subtitle">'+e.CountryCode+"<\/span>")})}},transformResult:function(n){return{suggestions:$.map(n,function(n){if(!_.isNil(n.label)&&u.data("city-code")!==n.CityCode){var t=n.label;return{value:t,data:n}}})}},onSelect:function(r){f(r,t);i?($(this).closest(".location-mobile-layout").removeClass("show"),n.preventpagescroll.remove(),$(this).trigger("blur")):($(this).closest(".location-mobile-layout").addClass("show"),n.preventpagescroll.onlymobile());i=!0},onHide:function(){}})});$(t).on("focus",".location-input",function(){u($(this));$(this).closest(".location-mobile-layout").addClass("show");n.preventpagescroll.onlymobile();i=!1});f=function(n,t){var r=t.closest(".location-input-wrapper"),i;t.data("code",n.data.Code);t.data("city-code",n.data.CityCode);t.data("type",n.data.Type);t.data("value",n.value);i=r.find(".autocomplete-selected-code");i.length>0?i.html(n.data.Code):r.append('<span class="autocomplete-selected-code">'+n.data.Code+"<\/span>")};u=function(n){setTimeout(function(){var t=n.data("first-suggestion");_.isEmpty(t)||_.isEmpty(n.val())?(n.val(""),n.removeData("code"),n.removeData("city-code"),n.removeData("type"),n.closest(".location-input-wrapper").find(".autocomplete-selected-code").remove()):n.data("code")!==undefined||(f(t,n),n.val(t.value))},100)};$(t).on("blur",".location-input",function(){u($(this));i=!0});$(t).on("keyup",".location-input",function(){_.isEmpty($(this).val())&&u($(this));$(this).closest(".location-mobile-layout").hasClass("show")||$(this).data("code")!==undefined||($(".hotelSearch__destinationInput_mobile").addClass("show"),n.preventpagescroll.onlymobile())});$(t).on("click",".location-reverse",function(){var t=$(this).closest(".location-inputs").find(".location-departure"),i=$(this).closest(".location-inputs").find(".location-arrival"),n={departure:{val:t.val()||"",code:t.data("code")||"",cityCode:t.data("city-code")||"",type:t.data("type")||"",selectedCodeHTML:t.closest(".location-input-wrapper").find(".autocomplete-selected-code")||null},arrival:{val:i.val()||"",code:i.data("code")||"",cityCode:i.data("city-code")||"",type:i.data("type")||"",selectedCodeHTML:i.closest(".location-input-wrapper").find(".autocomplete-selected-code")||null}};t.val(n.arrival.val);t.data("code",n.arrival.code);t.data("city-code",n.arrival.cityCode);t.data("type",n.arrival.type);i.val(n.departure.val);i.data("code",n.departure.code);i.data("city-code",n.departure.cityCode);i.data("type",n.departure.type);_.isEmpty(n.departure.selectedCodeHTML)?_.isEmpty(n.arrival.code)||t.closest(".location-input-wrapper").append('<span class="autocomplete-selected-code">'+n.arrival.code+"<\/span>"):_.isEmpty(n.arrival.code)?n.departure.selectedCodeHTML.remove():n.departure.selectedCodeHTML.html(n.arrival.code);_.isEmpty(n.arrival.selectedCodeHTML)?_.isEmpty(n.departure.code)||i.closest(".location-input-wrapper").append('<span class="autocomplete-selected-code">'+n.departure.code+"<\/span>"):_.isEmpty(n.departure.code)?n.arrival.selectedCodeHTML.remove():n.arrival.selectedCodeHTML.html(n.departure.code);r.validateRequiredInput(t);r.validateRequiredInput(i)});$(".mobileclose",".location-mobile-layout").on("click",function(){$(this).closest(".location-mobile-layout").find(".location-input").autocomplete("hide");$(this).closest(".location-mobile-layout").removeClass("show");n.preventpagescroll.remove()})};return{init:function(n){return t(n)}}}(),o=function(){var n="https://newbiletcdn.coral.ru/Airlines/thumbs/";return($stage==="coraltravelua"||$stage==="coraltraveluk")&&(n="https://newbiletcdn.coraltravel.ua/Airlines/thumbs/"),n},v=function(){var n=function(n){var r=[],f=$(".airline-filter-selected",n),t=$(".airline-filter-text",n),i=[],u=function(r){var e=$(".airline-filter",n);if(i.length<3){var u=$('<div class="airline-item" data-code="'+r.data.Code+'" />'),s='<img src="'+o()+r.data.Code.toLowerCase()+'.png" />';u.html(s+r.value+'<i class="material-icons airline-item-remove">&#xe14c<\/i>');f.append(u);i.push(r.data.Code);t.find(".filter-badge[data-code="+r.data.Code+"]").length<1&&t.append('<span class="filter-badge" data-code="'+r.data.Code+'">'+r.data.Code+"<\/span>");t.closest(".search-dropdown").removeClass("no-text");i.length===3&&e.prop("disabled",!0)}};$(n).on("click",".airline-filer-dropdown",function(){var n=$(this).closest(".search-dropdown-wrapper").find(".search-dropdown-content");_.isEmpty(r)&&(n.addClass("loading"),$.ajax({url:$gdsUrl+"/api/Flight/AllAirlinesV2",dataType:"json",async:!1,success:function(t){r=$.map(t,function(n){var t,i;if(!_.isNil(n.Code)&&!_.isNil(n.Name))return t={value:n.Code+" - "+n.Name,data:{Code:n.Code,Name:n.Name}},localStorage.getItem("FlightSearchModel")&&(i=JSON.parse(localStorage.getItem("FlightSearchModel")),_.includes(i.AirlineCodes,n.Code)&&u(t)),t});setTimeout(function(){n.removeClass("loading")},1e3)}}))});$(n).on("focus",".airline-filter",function(){var n=$(this),f=n.hasClass("autocompleted"),t=n.closest(".airline-filter-wrapper");f||n.autocomplete({lookup:r,minChars:2,showNoSuggestionNotice:!1,noSuggestionNotice:i18n_en.partials.searchTabs.flightSearch.noResult,triggerSelectOnValidInput:!1,appendTo:t,autoSelectFirst:!0,beforeRender:function(){t.find(".autocomplete-suggestions").eq(1).remove()},onSearchComplete:function(n,r){r=t.find(".autocomplete-suggestion").each(function(n){var t=$(this),u=r[n].data,f="";f+='<img src="'+o()+u.Code.toLowerCase()+'.png" />';t.prepend(f);_.includes(i,u.Code)?t.hide():t.show()})},transformResult:function(n){return{suggestions:$.map(n,function(n){if(!_.isNil(n.Name)&&!_.isNil(n.Code))return{value:n.value,data:n}})}},onSelect:function(t){u(t);n.val("")}})});$(n).on("click",".airline-item-remove",function(){var f=$(this),e=$(".airline-filter",n),r=f.closest(".airline-item"),u=r.data("code");_.remove(i,function(n){return n===u});r.remove();t.find(".filter-badge[data-code="+u+"]").remove();t.find(".filter-badge").length<1&&t.closest(".search-dropdown").addClass("no-text");e.prop("disabled",!1)})};return{init:function(t){return n(t)}}}(),s=function(){var u=function(n){$(n).on("click",".pax-spinner-up",function(){i($(this).closest(".pax-spinner"),"up");r(n)});$(n).on("click",".pax-spinner-down",function(){i($(this).closest(".pax-spinner"),"down");r(n)})},i=function(n,t){var i={input:n.find(".pax-spinner-input"),min:n.data("spinner-min")||0,max:n.data("spinner-max")||9,val:parseInt(n.find(".pax-spinner-input").val())};t==="up"?i.val!==i.max&&i.input.val(i.val+1):t==="down"&&i.val!==i.min&&i.input.val(i.val-1)},n=function(n,i){var r="";return i=parseInt(i),i>0&&(n==="adult"?r=i<2?t.Adult:t.AdultPlural:n==="child"?r=i<2?t.ChildShort:t.ChildPlural:n==="infant"?r=i===1?t.Infant:i===2||i===3||i===4?t.InfantPlural:i===5?t.Infant5:i===6?t.Infant6:i===7?t.Infant7:i===8?t.Infant8:i===9?t.Infant9:t.Infant:n==="infantwithseat"&&(r=i===1?t.InfantSeated:i===2?t.InfantSeated2:i===3?t.InfantSeated3:i===4?t.InfantSeated4:i===5?t.InfantSeated5:i===6?t.InfantSeated6:i===7?t.InfantSeated7:i===8?t.InfantSeated8:i===9?t.InfantSeated9:t.InfantSeatedPlural)),r},r=function(t){var i={wrapper:$(".flight-pax-wrapper",t),input:$(".pax-input",t),adult:$(".pax-adult",t).val(),child:$(".pax-child",t).val(),infant:$(".pax-infant",t).val(),infantwithseat:$(".pax-infantwithseat",t).val()},r;i.adult=i.adult>0?i.adult+" "+n("adult",i.adult):"";i.child=i.child>0?"+"+i.child+" "+n("child",i.child):"";i.infant=i.infant>0?"+"+i.infant+" "+n("infant",i.infant):"";i.infantwithseat=i.infantwithseat>0?"+"+i.infantwithseat+" "+n("infantwithseat",i.infantwithseat):"";i.input.val(i.adult);i.wrapper.find(".flight-pax-info").remove();i.child!==""||i.infant!==""||i.infantwithseat!==""?(r='<div class="flight-pax-info d-flex flex-wrap">',i.child!==""&&(r+="<div>"+i.child+"<\/div>"),i.infant!==""&&(r+="<div>"+i.infant+"<\/div>"),i.infantwithseat!==""&&(r+="<div>"+i.infantwithseat+"<\/div>"),r+="<\/div>",i.wrapper.append(r),i.wrapper.addClass("pax-added")):i.wrapper.removeClass("pax-added")};return{init:function(n){return u(n)},paxText:function(t,i){return n(t,i)},paxUpdate:function(n){return r(n)},spinUp:function(n){return i(n,"up")},spinDown:function(n){return i(n,"down")}}}(),e=function(n){return moment(n,"DD.MM.YYYY").format("YYYY-MM-DD")},y=function(n){var r=$(n),t={type:r.find('[name="flight-type"]'),departure:r.find(".location-departure").first(),selectedDeparture:{},arrival:r.find(".location-arrival").first(),selectedArrival:{},reverse:r.find(".location-reverse"),dateOnewayDeparture:r.find(".datepicker-oneway-departure").first(),dateRoundtripDeparture:r.find(".datepicker-roundtrip-departure").first(),dateRoundtripReturn:r.find(".datepicker-roundtrip-return").first(),adult:r.find(".flight-pax-wrapper .pax-adult"),child:r.find(".flight-pax-wrapper .pax-child"),infant:r.find(".flight-pax-wrapper .pax-infant"),infantWithSeat:r.find(".flight-pax-wrapper .pax-infantwithseat"),"class":r.find(".search-option-class"),airlineFilter:r.find(".airline-filter"),airlineFilterDropdown:r.find(".search-option-airline"),airlineFilterText:r.find(".airline-filter-text"),airlineFilterData:[],selectedAirlines:[],selectedClass:r.find(".search-class-selected"),isDirectFlight:r.find(".is-direct-flight"),isThreeDays:!1,multi:r.find(".flight-multi"),searchButton:r.find(".search-button .btn"),searchData:{}},u,f,e;localStorage.getItem("FlightSearchModel")&&(t.searchData=JSON.parse(localStorage.getItem("FlightSearchModel")),t.searchData.FlightType&&t.type.filter('[value="'+t.searchData.FlightType+'"]').click(),u=t.departure.closest(".location-input-wrapper"),$.isEmptyObject(t.searchData.DepartureCity)||(t.departure.val(t.searchData.DepartureCity.Value),t.departure.data("type",t.searchData.DepartureCity.Type),t.departure.data("code",t.searchData.DepartureCity.Code),t.selectedDeparture=t.searchData.DepartureCity,u.find(".autocomplete-selected-code").length>0?u.find(".autocomplete-selected-code").html(t.searchData.DepartureCity.Code):u.append('<span class="autocomplete-selected-code">'+t.searchData.DepartureCity.Code+"<\/span>"),_.isEmpty(t.searchData.DepartureCity.Code)?(t.departure.val(""),u.find(".autocomplete-selected-code").hide()):u.find(".autocomplete-selected-code").show()),f=t.arrival.closest(".location-input-wrapper"),$.isEmptyObject(t.searchData.ArrivalCity)||(t.arrival.val(t.searchData.ArrivalCity.Value),t.arrival.data("type",t.searchData.ArrivalCity.Type),t.arrival.data("code",t.searchData.ArrivalCity.Code),t.selectedArrival=t.searchData.ArrivalCity,f.find(".autocomplete-selected-code").length>0?f.find(".autocomplete-selected-code").html(t.searchData.ArrivalCity.Code):f.append('<span class="autocomplete-selected-code">'+t.searchData.ArrivalCity.Code+"<\/span>"),_.isEmpty(t.searchData.ArrivalCity.Code)?(t.arrival.val(""),f.find(".autocomplete-selected-code").hide()):f.find(".autocomplete-selected-code").show()),t.searchData.DepartureDate&&new Date(new Date(t.searchData.DepartureDate).toDateString())>=new Date((new Date).toDateString())?(t.dateOnewayDeparture.val(moment(t.searchData.DepartureDate).format("DD.MM.YYYY")),t.dateRoundtripDeparture.val(moment(t.searchData.DepartureDate).format("DD.MM.YYYY")),t.dateRoundtripReturn.val(moment(t.searchData.DepartureDate).format("DD.MM.YYYY"))):(t.dateOnewayDeparture.val(moment(new Date).format("DD.MM.YYYY")),t.dateRoundtripDeparture.val(moment(new Date).format("DD.MM.YYYY")),t.dateRoundtripReturn.val(moment(new Date).format("DD.MM.YYYY"))),t.searchData.ReturnDate&&new Date(new Date(t.searchData.ReturnDate).toDateString())>=new Date((new Date).toDateString())&&(t.dateRoundtripReturn.val(moment(t.searchData.ReturnDate).format("DD.MM.YYYY")),i=moment(t.searchData.DepartureDate).format("DD.MM.YYYY")),_.isNil(t.searchData.AdultCount)||t.adult.val(t.searchData.AdultCount),_.isNil(t.searchData.ChildCount)||t.child.val(t.searchData.ChildCount),_.isNil(t.searchData.InfantCount)||t.infant.val(t.searchData.InfantCount),_.isNil(t.searchData.InfantSeatedCount)||t.infantWithSeat.val(t.searchData.InfantSeatedCount),s.paxUpdate(n),_.isEmpty(t.searchData.AirlineCodes)||(e="",$.map(t.searchData.AirlineCodes,function(n){e+='<span class="filter-badge" data-code="'+n+'">'+n+"<\/span>"}),t.airlineFilterText.closest(".search-dropdown").removeClass("no-text"),t.airlineFilterText.html(e)),t.searchData.Class&&t.class.find('[data-value="'+t.searchData.Class+'"]').click(),t.isDirectFlight.prop("checked",t.searchData.IsDirectFlight),t.searchData.FlightType==="MultiDestination"&&($.map(t.searchData.Destinations,function(n,i){i>1&&t.multi.find(".btn-add-flight").last().click()}),t.multi.find(".flight-multi-item").each(function(n){var r=$(this),i={departure:r.find(".location-departure"),selectedDeparture:{},arrival:r.find(".location-arrival"),selectedArrival:{},datepicker:r.find(".datepicker-input")};i.departure.val(t.searchData.Destinations[n].DepartureCity.Value);i.departure.data("type",t.searchData.Destinations[n].DepartureCity.Type);i.departure.data("code",t.searchData.Destinations[n].DepartureCity.Code);i.departure.next(".autocomplete-selected-code").length>0?i.departure.next(".autocomplete-selected-code").html(t.searchData.Destinations[n].DepartureCity.Code):i.departure.after('<span class="autocomplete-selected-code">'+t.searchData.Destinations[n].DepartureCity.Code+"<\/span>");i.departure.next(".autocomplete-selected-code").show();i.selectedDeparture=t.searchData.Destinations[n].DepartureCity;i.departure.data("destination",i.selectedDeparture);i.arrival.val(t.searchData.Destinations[n].ArrivalCity.Value);i.arrival.data("type",t.searchData.Destinations[n].ArrivalCity.Type);i.arrival.data("code",t.searchData.Destinations[n].ArrivalCity.Code);i.arrival.next(".autocomplete-selected-code").length>0?i.arrival.next(".autocomplete-selected-code").html(t.searchData.Destinations[n].ArrivalCity.Code):i.arrival.after('<span class="autocomplete-selected-code">'+t.searchData.Destinations[n].ArrivalCity.Code+"<\/span>");i.arrival.next(".autocomplete-selected-code").show();i.selectedArrival=t.searchData.Destinations[n].ArrivalCity;i.arrival.data("destination",i.selectedArrival);i.datepicker.val(moment(t.searchData.Destinations[n].DepartureDate).format("DD.MM.YYYY"))})))},p=function(n){var t={type:$('[name="flight-type"]',n),selectedDeparture:{Type:$(".location-departure",n).data("type"),Code:$(".location-departure",n).data("code"),Value:$(".location-departure",n).val()},selectedArrival:{Type:$(".location-arrival",n).data("type"),Code:$(".location-arrival",n).data("code"),Value:$(".location-arrival",n).val()},dateOnewayDeparture:$(".datepicker-oneway-departure",n),dateRoundtripDeparture:$(".datepicker-roundtrip-departure",n),dateRoundtripReturn:$(".datepicker-roundtrip-return",n),selectedClass:$(".search-option-class .selected",n),adult:$(".pax-adult",n),child:$(".pax-child",n),infant:$(".pax-infant",n),infantWithSeat:$(".pax-infantwithseat",n),isThreeDays:!1,isDirectFlight:$(".is-direct-flight",n),airlineFilterText:$(".airline-filter-text",n),multi:$(".flight-multi",n)},i=t.type.filter(":checked").val(),h=i==="OneWay"?e(t.dateOnewayDeparture.val()):e(t.dateRoundtripDeparture.val()),c=i==="OneWay"?"":e(t.dateRoundtripReturn.val()),l=parseInt(t.adult.val()),a=parseInt(t.child.val()),v=parseInt(t.infant.val()),y=parseInt(t.infantWithSeat.val()),p=t.selectedClass.data("value"),r=t.isThreeDays,w=t.isDirectFlight.is(":checked"),u=[],o=[],s;return t.airlineFilterText.find(".filter-badge").length&&t.airlineFilterText.find(".filter-badge").each(function(){u.push($(this).text())}),i==="MultiDestination"&&(r=!1,t.multi.find(".flight-multi-item").each(function(){var n=$(this);o.push({DepartureCity:{Type:n.find(".location-departure").data("type"),Code:n.find(".location-departure").data("code"),Value:n.find(".location-departure").val()},ArrivalCity:{Type:n.find(".location-arrival").data("type"),Code:n.find(".location-arrival").data("code"),Value:n.find(".location-arrival").val()},DepartureDate:e(n.find(".datepicker-multi-departure").val())})})),s={FlightType:i,DepartureCity:t.selectedDeparture,DepartureDate:h,ArrivalCity:t.selectedArrival,ReturnDate:c,Destinations:o,AdultCount:l,ChildCount:a,InfantCount:v,InfantSeatedCount:y,Class:p,AirlineCodes:u,IsThreeDays:r,IsDirectFlight:w},_.isNil(t.dateOnewayDeparture.val())?f.add(t.dateOnewayDeparture):f.remove(t.dateOnewayDeparture),s},w=function(n){var t="";return $.isEmptyObject(n)||(n.FlightType==="OneWay"?(t+="ds[0].de.lc="+n.DepartureCity.Code,t+="&ds[0].de.lt="+n.DepartureCity.Type,t+="&ds[0].ar.lc="+n.ArrivalCity.Code,t+="&ds[0].ar.lt="+n.ArrivalCity.Type,t+="&ds[0].dd="+n.DepartureDate):n.FlightType==="RoundTrip"?(t+="ds[0].de.lc="+n.DepartureCity.Code,t+="&ds[0].de.lt="+n.DepartureCity.Type,t+="&ds[0].ar.lc="+n.ArrivalCity.Code,t+="&ds[0].ar.lt="+n.ArrivalCity.Type,t+="&ds[0].dd="+n.DepartureDate,t+="&ds[1].de.lc="+n.ArrivalCity.Code,t+="&ds[1].de.lt="+n.ArrivalCity.Type,t+="&ds[1].ar.lc="+n.DepartureCity.Code,t+="&ds[1].ar.lt="+n.DepartureCity.Type,t+="&ds[1].dd="+n.ReturnDate):n.FlightType==="MultiDestination"&&($.isEmptyObject(n.Destinations)||$.map(n.Destinations,function(n,i){i>0&&(t+="&");t+="ds["+i+"].de.lc="+n.DepartureCity.Code;t+="&ds["+i+"].de.lt="+n.DepartureCity.Type;t+="&ds["+i+"].ar.lc="+n.ArrivalCity.Code;t+="&ds["+i+"].ar.lt="+n.ArrivalCity.Type;t+="&ds["+i+"].dd="+n.DepartureDate})),n.FlightType==="OneWay"?t+="&ft=0":n.FlightType==="RoundTrip"?t+="&ft=1":n.FlightType==="MultiDestination"&&(t+="&ft=2"),t+=n.AdultCount?"&ad="+n.AdultCount:"",t+=n.ChildCount?"&ch="+n.ChildCount:"",t+=n.InfantCount?"&in="+n.InfantCount:"",t+=n.InfantSeatedCount?"&is="+n.InfantSeatedCount:"",t+=n.Class==="First"?"&cl=1":"",t+=n.Class==="Business"?"&cl=2":"",t+=n.Class==="Economy"?"&cl=3":"",t+=n.Class==="PremiumEconomy"?"&cl=4":"",t+=n.IsThreeDays?"&td=true":"",t+=n.IsDirectFlight?"&df=true":"",t+=n.IsOnlyLowCost?"&lc=true":"",$.isEmptyObject(n.AirlineCodes)||$.map(n.AirlineCodes,function(n,i){t+="&ac["+i+"]="+n})),t},b=function(t){var i,u,f;r.validateRequiredModel(t)&&(i=p(t),u=w(i),i===!1||_.isEmpty(u)||(n.travelloader.show(),f=$gdsUrl+"/FlightV2/Search/Index?"+u+"&external=true",localStorage.setItem("FlightSearchModel",JSON.stringify(i)),window.open(f)),n.travelloader.hide())},r=function(){var t=function(n){$(n).on("focus",".required",function(){f.remove($(this))})},n=function(n){var t=!0,i=i18n_en.partials.searchTabs.flightSearch.requiredErrorMessage;return _.isEmpty(n.val())?(t=!1,f.add(n,i)):f.remove(n),t},i=function(t){var i=!0;return $(".required:visible",t).each(function(){n($(this))||(i=!1)}),i};return{init:function(n){return t(n)},validateRequiredInput:function(t){return n(t)},validateRequiredModel:function(n){return i(n)}}}(),f=function(){var n=function(n,t){n.addClass("validate-error");_.isEmpty(t)||(n.popover({toggle:"popover",placement:"top",trigger:"focus",content:t,container:n.closest("div"),template:'<div class="passenger-validate-error-popover popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-header"><\/h3><div class="popover-body"><\/div><\/div>'}),n.popover("show"))},t=function(n){n.removeClass("validate-error");n.closest("div").find(".popover").remove()};return{add:function(t,i){return n(t,i)},remove:function(n){return t(n)}}}();return{init:function(){moduleFactory.registerModule(u,h)}}};return{getInstance:function(){return r||(r=f()),r}}}(),i=t.getInstance();i.init()}).call(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1]);"use strict";var $stage="coral",$gdsUrl="https://booking.coral.ru",$urlAppendix="",$ascr="6904f4248b219518cdd3c56ab1980bb8";(function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n})()({1:[function(){(function(n){(function(){var t=function(){var i="headerWidget",t=void 0,r=function(){var s="a-zA-ZАБВГҐДЕЄЁЖЗІЇИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгґдеёжзєийіїклмнопрстуфхцчшщъыьэюяЁё",t=null,f=null,l=function(n){t=n;r.currencyTopside();r.wishlistTopside();r.quickSearchTopSide();r.handleLoginModalTopSide(n);r.geolocationTopSide();h.callbackModalHeader();h.rightMenuOptionsHeader();e.destinationMenu();e.reservationCheckModal();u.init();w();y();c();p();b(n);v();a(n)},a=function(){var n=function(n){$.ajax({type:"post",url:"/v1/locale/"+n,success:function(t){var i,r;t.result&&(i=window.location.pathname.split("/"),i.shift(),i[0].length===2?i[0]=n==="uk"?n:"":n==="uk"?i.unshift(n):null,r=i.join("/")+(window.location.search!==""?window.location.search:"")+(window.location.hash!==""?window.location.hash:""),r=r.startsWith("/")?r:"/"+r,location.href=r)}})},t=$(".locale-item");_.forEach(t,function(t){$(t).on("click",function(t){t.preventDefault();window.localStorage.clear();n($(this).data("locale"))})})},u={$el:null,init:function(){u.handleToggleButton();u.handleCloseButton();u.cloneDepartures();u.cloneMenus();u.cloneExchange();u.handleCallUsButton()},handleToggleButton:function(){$(".mobilemenutoggler > span",t).on("click",function(t){t.preventDefault();$(this).closest(".mobilemenutoggler").hasClass("expanded")?(n.preventpagescroll.remove(),$(this).closest(".mobilemenutoggler").removeClass("expanded")):(n.preventpagescroll.init(),$(this).closest(".mobilemenutoggler").addClass("expanded"))})},handleCloseButton:function(){$(".offsetmenuheader > .offsetmenuclose > i",t).on("click",function(t){t.preventDefault();n.preventpagescroll.remove();$(".mobilemenutoggler").removeClass("expanded")})},cloneDepartures:function(){var i=$(".geolocation-item",".geolocation-list"),r=$(".geolocation-current").data("itemname"),e=$(".geolocation-current").data("itemid"),n=[],t="";_.forEach(i,function(i){var r=$(i).text(),f=$(i).data("departureid"),o=e===$(i).data("departureid");n.push({title:r,id:f,selected:o});t+=u.createDepatureListItem(f,r,o)});u.handleDeparturePanel();$(".departuresearchwrapper").data("model",n);f=n;$("ul",".offsetDepartureMenu").html(t);u.prepareDepartureInputs(r);u.handleDepartureClick()},prepareDepartureInputs:function(n){$("input.ghostInput",".departuresearchwrapper").val(n);$("input.departureFilterInput",".departuresearchwrapper").attr("placeholder",n)},createDepatureListItem:function(n,t,i){return"<li data-departureid="+n+" "+(i?'class="selected"':"")+">"+t+"<\/li>"},handleDeparturePanel:function(){$("input.ghostInput",".departuresearchwrapper").on("click",function(){$(".offsetDepartureMenu").addClass("expanded");n.preventpagescroll.init(".mobileoffsetmenucontainer");$("input.departureFilterInput").trigger("focus")});$(".header > .offsetmenuclose",".offsetDepartureMenu").on("click",function(t){t.preventDefault();n.preventpagescroll.remove(".mobileoffsetmenucontainer");$(".offsetDepartureMenu").removeClass("expanded")});u.handleDepartureFilter()},handleDepartureFilter:function(){$(".departureFilterInput").on("input",function(){var n="",t=$(this).val(),i=t.length>0?_.filter(f,function(n){return n.title.includes(t)}):f;i.length>0&&_.forEach(i,function(t){n+=u.createDepatureListItem(t.id,t.title,t.selected)});$("ul",".offsetDepartureMenu").html(n)})},handleDepartureClick:function(){$(".offsetDepartureMenu").on("click","ul > li:not(.selected)",function(){var t=$(this).data("departureid");n.travelloader.show();$(".geolocation-item[data-departureid="+t+"]",".geolocation-list").trigger("click")})},cloneMenus:function(){$(".mobileoffsetmenucontainer > .mainmenuwrapper > ul",t).append($(".menuList > ul",t).html());e.reservationCheckModal()},cloneExchange:function(){var n="",u=$(".currency-list > ul > li",t),f=$(".currency-list > ul > li.selected").data("currencyid"),i,r;_.forEach(u,function(t){var i=$(t).data("currencyid"),r=$(t).find(".currency-name").text();n+='<option data-currencyid="'+i+'" '+(f===i?"selected":"")+">"+r+"<\/option>"});$(".mobileoffsetmenucontainer > .currencymenuwrapper > .currency",t).html('<select class="currencyselect form-control">'+n+"<\/select>");$(document).on("change","select.currencyselect",function(){$("li[data-currencyid="+$("option:selected",this).data("currencyid")+"]").trigger("click")});i=$(".flexbox-exchange").clone();$(".mobileoffsetmenucontainer > .currencymenuwrapper > .exchangerates",t).html(i);r=$(".mobileoffsetmenucontainer > .currencymenuwrapper > .exchangerates",t).find("img");_.forEach(r,function(n){$(n).removeClass("lazy").attr("src",$(n).data("src"))})},handleCallUsButton:function(){$(".btnMobileCallUs",t).on("click",function(){$(".container-phone > a",t).trigger("click");var n=$(".commonModal");$(".modal-dialog",n).addClass("h-auto w-auto");n.on("hidden.bs.modal",function(){$(".modal-dialog",n).removeClass("h-auto w-auto")})})}},r={currencyTopside:function(){var t=$(".headerCurrency"),r=$(".currency-current",t),i=$(".currency-list",t),u=$("li.selected",i).html(),f=$(".currencymenuwrapper",".mobilenav");$(r,t).html(u);$("hr",r).remove();$(document).on("click",function(n){$(n.target).hasClass("headerCurrency")||$(n.target).hasClass("currency-list")||$(n.target).hasClass("currency-current")||$(n.target).hasClass("currency-icon")||$(n.target).hasClass("currency-name")||$(n.target).hasClass("top-currency-arrow-down")?t.hasClass("listShow")?(i.slideToggle("fast"),t.removeClass("listShow")):(i.slideDown("fast"),t.addClass("listShow")):(i.slideUp("fast"),t.removeClass("listShow"));$(window).on("scroll",function(){i.slideUp("fast");t.removeClass("listShow")})});$("li",i).on("click",function(i){i.preventDefault();var u=$(this).html(),f=$(this).data("currencyid");$.ajax({type:"post",url:n.getApplicationURL("/v1/currency/"+f),success:function(){location.reload()}});$(r,t).html(u);$("hr",r).remove()});$(f,document).on("click","li",function(t){t.preventDefault();n.travelloader.show("Calculating...");var i=$(this).data("currencyid");$.ajax({type:"post",url:n.getApplicationURL("/v1/currency/"+i),success:function(){location.reload()}})})},wishlistTopside:function(){var t=$(".topItem.wishlist"),i=$(".wishlist-list",t);$(".wishlist-btn",t).hover(function(){$("i",this).text("favorite")},function(){$("i",this).text("favorite_border")});$(document).on("click",function(r){$(r.target).hasClass("wishlist-top-icon")||$(r.target).hasClass("wishlist-top-icon")||$(r.target).hasClass("wishlist-icon-badge")?(n.canvasloader.add($("ul",".wishlist-list")),$.ajax({type:"GET",url:n.getApplicationURL("/v1/customer/getwishlist/basic"),datatype:"json",success:function(n){$("ul",".wishlist-list").empty();_.isNil(n)||n===""?$("ul",".wishlist-list").append('<div class="title d-block">'+i18n_en.partials.header.emptyWishlist+"<\/div>"):$("ul > li",".wishlist-list").length>0?($("ul",".wishlist-list").append(n),$(".wishlist-top-go-btn").removeClass("btnHide")):($("ul",".wishlist-list").append(n),$(".wishlist-top-go-btn").removeClass("btnHide"))},error:function(n){console.log(n)},complete:function(){n.canvasloader.remove($("ul",".wishlist-list"))}}),t.hasClass("listShow")?(i.slideUp("fast"),t.removeClass("listShow")):(i.slideToggle("fast"),t.addClass("listShow"))):(i.slideUp("fast"),t.removeClass("listShow"));$(window).on("scroll",function(){i.slideUp("fast");t.removeClass("listShow")})})},quickSearchTopSide:function(){var n=$(".topItem.quickSearch"),t=$(".quickSearch-input-container",n),i=$(".quickSearch-input",t);$(document).on("click",function(r){$(r.target).hasClass("quickSearch")||$(r.target).hasClass("quickSearch-container")||$(r.target).hasClass("quickSearch-icon")?n.hasClass("listShow")?(t.slideUp("fast"),n.removeClass("listShow"),i.val("")):(t.slideDown("fast"),n.addClass("listShow")):$(r.target).hasClass("quickSearch-input")||$(r.target).hasClass("quickSearch-input-container")||$(r.target).hasClass("quickSearch-search-btn-icon")||(t.slideUp("fast"),n.removeClass("listShow"),i.val(""));$(window).on("scroll",function(){t.slideUp("fast");n.removeClass("listShow");i.val("")})});window.onscroll=function(){t.slideUp("fast");n.removeClass("listShow")};$(".quickSearch-input",n).keypress(function(n){var t=n.which;t===13})},handleLoginModalTopSide:function(t){var f=$(".container-topside .topItem.loginRegister, .profilemenuwrapper > .loginRegister",t),i,u;f.off("click").on("click",function(n){n.preventDefault();r.loginModalTopSide(t)});i=$(".topItem.loggedInUser",".container-topside");u=$(".myAccountList",i);$(document).on("click",function(n){$(n.target).hasClass("loggedInUser")||$(n.target).hasClass("loggedInUser-icon")||$(n.target).hasClass("loggedInUser-btn")?u.slideToggle("fast",function(){u.is(":visible")?i.addClass("showlist"):i.removeClass("showlist")}):u.slideUp("fast",function(){i.removeClass("showlist")})});$(t).on("click",".btnLogOut",function(){n.travelloader.show();$.ajax({type:"post",url:n.getApplicationURL("/v1/customer/logout"),success:function(){location.href=n.getApplicationURL("/")},error:function(t){n.travelloader.hide();console.log(t)}})})},loginModalTopSide:function(t){var f=$(".container-topside .topItem.loginRegister, .mobilenav .loginRegister",t),u="modalLogin",i=$(".commonModal"),e=5e3;n.modalloader.add(i);!$(".loginModalDialog",i).length>0&&n.commonmodal.show({url:n.getApplicationURL("/v1/customer/modal/login")},{targetModal:"commonModal",additionalClass:u,modalDialogClass:"loginModalDialog",coverOnMobile:!0,modalHeader:{title:i18n_en.modals.loginmodal.headerTitle}},function(){n.modalloader.remove();$(".showPass",i).off("click").on("click",function(){o($(".inputLoginPassword"))});$(".btnLogin",i).off("click").on("click",function(t){t.preventDefault();var r=$(".inputLoginEmail",i),u=$(".inputLoginPassword",i),f=$(".checkRememberMe ",i),o={Email:r.val(),Password:u.val(),IsRememberMe:f.prop("checked")};r.attr("disabled","disabled");u.attr("disabled","disabled");$(".btnLogin",i).attr("disabled","disabled");n.canvasloader.add($(".modal-content",".loginModalDialog"));$.ajax({type:"post",url:n.getApplicationURL("/v1/customer/login"),data:o,datatype:"json",success:function(){$(".bookingTransactionModalContainer")&&localStorage.removeItem("bookingTransactionViewCurrentUser");location.reload()},error:function(t){n.canvasloader.remove($(".modal-content",".loginModalDialog"));$("h1",i).after('<div class="general-message error mb-3" style="display: none; visibility: visible;"><i class="material-icons">&#xe002<\/i>'+(t.status===401?i18n_en.partials.header.usernameOrPasswordError:i18n_en.global.errorMessage)+"<\/div>");$(".general-message",i).slideDown("fast");setTimeout(function(){$(".general-message",i).slideUp("fast",function(){$(".general-message",i).remove()})},e)},complete:function(){r.removeAttr("disabled");u.removeAttr("disabled");$(".btnLogin",i).removeAttr("disabled")}})});$(".btnGoRegister",i).off("click").on("click",function(f){f.preventDefault();n.modalloader.add(i);i.removeClass(u);r.registerModalTopSide(t)});$(".forgotPassword > span",i).on("click",function(t){t.preventDefault();n.modalloader.add(i);i.removeClass(u);r.forgotPasswordModalTopSide()})});void 0&&f.trigger("click")},triggerTooltip:function(n,t){n.closest(".form-group").find("label.validate-error").attr("title",t);n.closest(".form-group").find("label.validate-error").attr("data-orginal-title",t);n.closest(".form-group").find("label.validate-error").tooltip("dispose");n.closest(".form-group").find("label.validate-error").tooltip({trigger:"hover",title:t,placement:"top",toggle:"tooltip"});(n.hasClass("inputRegisterPassword")||n.hasClass("inputRegisterPasswordVerify"))&&(n.css("padding-right","60px"),n.closest(".form-group").find("label.validate-error").css("right","40px"))},formIsValid:function(n,t){return $(t).valid()},registerModalTopSide:function(t){var i=$(".commonModal"),u="modalRegister";n.modalloader.add(i);n.commonmodal.show({url:n.getApplicationURL("/v1/customer/modal/register")},{targetModal:"commonModal",additionalClass:u,modalDialogClass:"registerModalDialog",coverOnMobile:!0,modalHeader:{title:i18n_en.modals.registermodal.headerTitle}},function(){n.modalloader.remove();var f=$(".selectRegisterPhonePrefix",i).val();r.applyMask(i,f);$(".selectRegisterPhonePrefix",i).on("change",function(){r.applyMask(i,$("option:selected",this).val())});$.validator.addMethod("phonemask",function(n,t,i){if(i){var r=n.split(""),u=_.find(r,function(n){return n==="x"});return u===undefined?!0:!1}});$.validator.addClassRules("inputRegisterMobilePhone",{phonemask:!0});$("form.formRegister",i).validate({showErrors:function(n,t){$.each(this.validElements(),function(n,t){var i=$(t);i.closest(".form-group").find(".validate-error").tooltip("dispose");i.closest(".form-group").find(".validate-error").remove()});$.each(t,function(n,t){var i=$(t.element);i.closest(".form-group").find(".validate-error").tooltip("dispose");i.closest(".form-group").find(".validate-error").remove();i.closest(".form-group").append('<label class="validate-error"><i class="material-icons">&#xe000<\/i><\/label>');i.closest(".form-group").find(".validate-error").tooltip({trigger:"hover focus",title:t.message,placement:"top"})})},errorElement:"label",errorClass:"validate-error",validClass:"validate-success",valid:"validate-success",html:!0,rules:{txtPasswordVerify:{minlength:8,equalTo:".inputRegisterPassword"},txtName:{charset:s},txtSurname:{charset:s},txtMobilePhone:{checkPhone:!0}}});$(".showPass",i).off("click").on("click",function(n){n.preventDefault();o($(".inputRegisterPassword"))});$(".showPassVerify",i).off("click").on("click",function(n){n.preventDefault();o($(".inputRegisterPasswordVerify"))});$(".checkRegisterPrivacyPolicy",i).on("click",function(){$(".checkRegisterPrivacyPolicy",i).prop("checked")?$(".btnRegisterSubmit",i).removeAttr("disabled"):$(".btnRegisterSubmit",i).attr("disabled","disabled")});$(".btnRegisterSubmit",i).off("click").on("click",function(u){var f;if(u.preventDefault(),f=r.formIsValid(t,$("form.formRegister",".registerModalDialog")),f){n.canvasloader.add($(".modal-content",i));var e=$(".inputRegisterEmail",i).val(),o=$(".inputRegisterName",i).val(),s=$(".inputRegisterSurname",i).val(),h=$(".inputRegisterPassword",i).val(),c=$(".inputRegisterPasswordVerify",i).val(),l=$(".selectRegisterPhonePrefix > option:selected",i).val(),a=n.phoneMethods.concatPhone(l,$(".inputRegisterMobilePhone",i).val()),v=$(".checkRegisterCookie",i).prop("checked"),y=$(".checkRegisterEmailNewsletter",i).prop("checked"),p=$(".checkRegisterSMS",i).prop("checked"),w=1e4,b={Mail:e,Name:o,Surname:s,Password:h,RePassword:c,MobilePhone:a,IsCookiePermission:v,AllowCampaignMail:y,AllowCampaignSms:p};$.ajax({type:"post",url:n.getApplicationURL("/v1/customer/create"),data:b,datatype:"json",success:function(t){n.canvasloader.remove($(".modal-content",i));n.generalsuccessmessage.show($("form.formRegister",i),i18n_en.partials.header.registerSuccess,!1);$(".inputRegisterEmail",i).val("");$(".inputRegisterName",i).val("");$(".inputRegisterSurname",i).val("");$(".inputRegisterPassword",i).val("");$(".inputRegisterPasswordVerify",i).val("");$(".inputRegisterPhonePrefix",i).val(70);$(".inputRegisterMobilePhone",i).val("");$(".checkRegisterCookie",i).prop("checked","true");$(".checkRegisterEmailNewsletter",i).prop("checked","true");$(".checkRegisterSMS",i).prop("checked","true");$(".checkRegisterPrivacyPolicy",i).trigger("click");var r=$(".bookingTransactionModal");if(r.length){r.data("iscurrentuser",!0);r.data("currentuser",JSON.stringify(t.Customer));$(i).on("hidden.bs.modal",function(){var n=$(".loginRegister-btn").attr("booking-transaction-event-id");_.each($(".btnBookingTransaction"),function(t){n&&$(t).data("booking-transaction-event-id")===_.toNumber(n)&&$(t).click()});$(".loginRegister-btn").attr("booking-transaction-event-id","")})}n.dataLayerManager.useDataLayer()&&n.dataLayerManager.registration()},error:function(t){n.canvasloader.remove($(".modal-content",i));t.status===404||t.status===500?n.generalerrormessage.show($("form.formRegister",i),i18n_en.global.errorOccured,!1):n.generalerrormessage.show($("form.formRegister",i),t.statusText,!1)},complete:function(){var n=$(".general-message",i);setTimeout(function(){n.fadeOut("fast",function(){setTimeout(function(){n.remove()},100)})},w)}})}});$(".btnGoLogin",i).off("click").on("click",function(f){f.preventDefault();n.modalloader.add(i);i.removeClass(u);r.loginModalTopSide(t)})})},applyMask:function(t,i){var r=n.phoneMethods.getmask(i),u=r.mask,f=r.placeholder;$(".inputRegisterMobilePhone",t).inputmask(u,{placeholder:f})},forgotPasswordModalTopSide:function(){var t=$(".commonModal");n.modalloader.add(t);n.commonmodal.show({url:n.getApplicationURL("/v1/customer/modal/forgotpassword")},{targetModal:"commonModal",additionalClass:"modalForgotPassword",modalDialogClass:"forgotPasswordModalDialog",modalHeader:{title:i18n_en.modals.forgotpasswordmodal.headerTitle}},function(){n.modalloader.remove();$(".btnForgotPasswordSend",t).off("click").on("click",function(){var i=$(".formForgotPassword"),r={Email:$(".inputForgotPasswordEmail",i).val()};$.ajax({type:"get",url:n.getApplicationURL("/v1/customer/ForgotPasswordSendMail"),data:r,datatype:"json",success:function(i){$("form.formForgotPassword").fadeOut("fast",function(){i.IsSuccess?n.generalsuccessmessage.show($(".modal-body",t),i18n_en.partials.header.resetPasswordCheckEmail):n.commonmodal.hide()})},error:function(i){n.generalerrormessage.show($(".modal-body",t),i.ErrorMessage);setTimeout(function(){n.commonmodal.hide()},5e3)}})});$(".btnForgotPasswordCancel",t).off("click").on("click",function(){n.commonmodal.hide("commonModal")})})},geolocationTopSide:function(){var n=$(".topItem.geolocation"),t=$(".geolocation-list",n);$(document).on("click",function(i){$(i.target).hasClass("geolocation")||$(i.target).hasClass("geolocation-current")||$(i.target).hasClass("geolocation-container")||$(i.target).hasClass("geolocation-list")?(t.slideToggle({start:function(){$(this).css({display:"flex"})},duration:"fast"}),$(".geolocation-container",n).toggleClass("menushow")):(t.slideUp("fast"),$(".geolocation-container",n).removeClass("menushow"))});$(window).on("scroll",function(){t.slideUp("fast");$(".geolocation-container",n).removeClass("menushow");$(".myAccountList").slideUp("fast");$(".loggedInUser").removeClass("showlist")})}},e={destinationMenu:function(){$(document).off("click",".countrymenu").on("click",".countrymenu",function(t){t.preventDefault();var r=$(".commonModal"),i="countriesModalDialog";n.modalloader.add(r);n.commonmodal.show({url:n.getApplicationURL("/v1/destination/countriesandhotels")},{targetModal:"commonModal",additionalClass:i,modalDialogClass:i,coverOnMobile:!0,modalHeader:{title:i18n_en.partials.header.destinationModalTitle}})})},reservationCheckModal:function(){var i=$(".commonModal"),u=5e3,f=$(".menuBtnReservationCheck",t);f.on("click",function(f){if(f.preventDefault(),!$(".reservationCheckModalDialog",i).length>0){n.modalloader.add($(".commonModal"));n.commonmodal.show({url:n.getApplicationURL("/v1/modal/reservationcheck")},{targetModal:"commonModal",additionalClass:"reservationCheckModal",modalDialogClass:"reservationCheckModalDialog",modalHeader:{title:i18n_en.modals.reservationcheckmodal.headerTitle}},function(){n.modalloader.remove();$(".modal-dialog",i).addClass("h-auto w-auto");i.on("hidden.bs.modal",function(){$(".modal-dialog",i).removeClass("h-auto w-auto")});$(".txtRequestNumber",i).inputmask("9{1,20}",{placeholder:" "});$(".infoFieldTooltip",i).on("click",function(n){n.preventDefault()});$(".infoFieldTooltip",i).tooltip({trigger:"hover",html:!0})});$(i).on("click",".reservationCheckInfo .login",function(n){n.preventDefault();r.loginModalTopSide(t)});$(i).on("click",".reservationCheckInfo .register",function(n){n.preventDefault();r.registerModalTopSide(t)});$(i).on("click",".btnReservationCheckFormSubmit",function(){var t=$(".txtRequestNumber",i).val(),r=$(".txtDocumentNumberWithNoSeries",i).val(),f;t!==""&&r!==""?(n.canvasloader.add($(".modal-content",".reservationCheckModalDialog")),$(".formReservationCheck input",i).prop("disabled",!0),f=n.getApplicationURL("/v1/reservation/check/?voucherId="+t+"&passportNumber="+r),$.ajax({type:"get",url:f,success:function(n){window.location.href=n.url}})):(n.canvasloader.remove($(".modal-content",".reservationCheckModalDialog")),$(".formReservationCheck input",i).prop("disabled",!1),$(".general-message",i).remove(),$(".formReservationCheck",i).before('<div class="general-message error mb-3" style="display: none; visibility: visible;"><i class="material-icons">&#xe002<\/i>'+i18n_en.modals.reservationCheck.fieldsAreRequired+"<\/div>"),$(".general-message",i).slideDown("fast"),setTimeout(function(){$(".general-message",i).slideUp("fast");setTimeout(function(){$(".general-message",i).remove()},250)},u))})}})}},h={callbackModalHeader:function(){var t=$(".container-tabs"),i=$(".commonModal"),r="modalCallbackModal";$(".btnCallback-header",t).off("click").on("click",function(){n.modalloader.add(i);n.commonmodal.show({url:n.getApplicationURL("/v1/customer/modal/callback")},{targetModal:"commonModal",additionalClass:r})})},rightMenuOptionsHeader:function(){var i=$(".container-tabs"),n=$(".container-menu",i),t=$(".menuList",n);$(document).on("click",function(i){$(i.target).hasClass("container-menu")||$(i.target).hasClass("menuTitle")||$(i.target).hasClass("menuIcon")?(n.toggleClass("menushow"),t.slideToggle("fast")):(t.slideUp("fast"),n.removeClass("menushow"));$(window).on("scroll",function(){t.slideUp("fast");n.removeClass("menushow")})})}},c=function(){function f(n){n?window.pageYOffset>=u-5?(t.addClass("sticky"),t.addClass("container-fluid"),$(".flexboxDestination",".flexboxTabContainer").css("max-width","100%"),t.removeClass("container")):(t.removeClass("sticky"),t.removeClass("container-fluid"),t.addClass("container")):(t.removeClass("sticky"),t.removeClass("container-fluid"),t.addClass("container"),$(".flexboxDestination",".flexboxTabContainer").css("max-width","501px"))}var i=$(".container-logo img",".site-header-container").attr("src");_.isNil(i)||$(".stickyLogoContainer",".flexboxTabContainer").html('<a href="'+n.getApplicationURL("/")+'"><img class="stickyLogo img-fluid" src="'+i+'" /><\/a>');var r=$(".container-tabItemWrap").attr("data-issticky"),t=$(".activeTab",".container-tabItemWrap"),u=void 0;window.onscroll=function(){$(window).width()<1006.98&&(r=!1);f(r)};t.length>0&&(u=t.offset().top)},v=function(){$("body").on("tabChange",function(n,t){var i=$(".showMoreTab","[data-module=searchtabsmain]");i.is(":visible")&&i.hide();$(".container-tabitem."+t).is(":visible")||$(".container-tabItemWrap .activeTab","[data-module=searchtabsmain]").show();$(".search-summary","[data-module=searchtabsmain]").hide()})},y=function(){function t(n){$("[data-module=searchtabsmain]").data("ishomepage")||$("[data-module=searchtabsmain]").removeAttr("data-ishomepage");var t=$(".container-tabItemWrap"),i=$(".container-tabItem",t);_.forEach(i,function(n){$(n).removeClass("activeTab")});$("."+n).addClass("activeTab")}var n=$(".container-other");$(".tabItem",n).on("click",function(){$(".validateError",".packagetour").popover("dispose");$(".validate-error",".hotelsearch").popover("dispose");$(".validate-error",".flightticket").popover("dispose");var i=$(this).data("tabtype"),r=$(".tabItem",n);_.forEach(r,function(n){$(n).removeClass("active")});$(this).addClass("active");t(i);$(this).trigger("tabChange",i);localStorage.setItem("ActiveTab",i);c()})},p=function(){var n=$(".container-tabs-main").attr("data-activetab"),t;n||(n=localStorage.getItem("ActiveTab")?localStorage.getItem("ActiveTab"):"packagetour");$(".container-tabs > .tabItem[data-tabtype="+n+"]").addClass("active").siblings().removeClass("active");t=$(".container-tabs > .tabItem.active").data("tabtype");$(".container-tabItem.activeTab",".container-tabItemWrap").removeClass("activeTab");$("."+t).addClass("activeTab")},w=function(){$("label").click(function(){var n=$(this).attr("for");$("."+n).focus()})},b=function(t){$(".container-phone a",t).on("click",function(t){t.preventDefault();n.modalloader.add($(".commonModal"));n.commonmodal.show({url:n.getApplicationURL("/v1/customer/modal/phonemodule")},{targetModal:"commonModal",additionalClass:"phoneModal",modalDialogClass:"phoneModalDialog",modalHeader:{title:i18n_en.modals.phonemodal.headerTitle}},function(){n.modalloader.remove()})})},o=function(n){var t=n.attr("type");t==="password"?(n.attr("type","text"),$(undefined).css("color","#4A4A4A")):(n.attr("type","password"),$(undefined).css("color","#9B9B9B"))};return $(".blackFridaySpanPopover").popover({html:!0,template:'<div class="blackFridayPopover popover" role="tooltip"><div class="arrow bfarrow"><\/div><div class="popover-body"><\/div><\/div>'}),{init:function(){moduleFactory.registerModule(i,l)},loginModal:{show:function(){}}}};return{getInstance:function(){return t||(t=r()),t}}}(),i=t.getInstance();i.init()}).call(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1]);"use strict";var $stage="coral",$gdsUrl="https://booking.coral.ru",$urlAppendix="",$ascr="6904f4248b219518cdd3c56ab1980bb8";(function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n})()({1:[function(){(function(n){(function(){var t=function(){var i="footerPartial",t=void 0,r=function(){var t=function(n){f(n);r();u(n);$(document).ready(function(){e()})},r=function(){var n=$(".footer-partial"),t=$(".container-bothside span.thisyear",n),i=$(".container-logo-menu .logo-sub-text span.thisyear",n);t.text(moment().format("YYYY"));i.text(moment().format("YYYY"))},u=function(t){var r=$(".footermaincontainer",t),i=$(".form-newsletter",r);$(".footer-newsletter-btn-submit").on("click",function(r){r.preventDefault();var u=$(".footer-newsletter-input").val();u&&(n.canvasloader.add($(".form-newsletter",t)),$.ajax({type:"post",url:n.getApplicationURL("/v1/newsletter/create?mail="+u),dataType:"json",success:function(r){if(r){var u=$(".general-message",t),f='<div class="general-message success"><i class="material-icons">&#xe86c<\/i>'+i18n_en.partials.footer.subscribeSuccess+"<\/div>";u.length>0?(u.remove(),$(i).after(f),u.fadeOut()):($(i).after(f),u.fadeOut());n.dataLayerManager.useDataLayer()&&n.dataLayerManager.subscription()}},error:function(n){if(n){var u=$(".general-message",t),r='<div class="general-message error"><i class="material-icons">error<\/i>'+i18n_en.partials.footer.subscribeError+"<\/div>";u.length>0?($(".general-message",t).remove(),$(i).after(r),setTimeout(function(){$(".general-message",t).fadeOut("fast");setTimeout(function(){$(".general-message",t).remove()},210)},2e3)):($(i).after(r),setTimeout(function(){$(".general-message",t).fadeOut("fast");setTimeout(function(){$(".general-message",t).remove()},210)},2e3))}},complete:function(){n.canvasloader.remove($(".form-newsletter",t))}}))})},f=function(){},e=function(){var n=$(".cookieAgreement"),t=function(n){for(var r=n+"=",f=decodeURIComponent(document.cookie),u=f.split(";"),t,i=0;i<u.length;i++){for(t=u[i];t.charAt(0)===" ";)t=t.substring(1);if(t.indexOf(r)===0)return t.substring(r.length,t.length)}return""},i=function(n,t){var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:10,i=new Date,r;i.setTime(i.getTime()+u*31536e6);r="expires="+i.toUTCString();document.cookie=n+"="+t+";"+r+";path=/"};if(t("coa")===""){n.removeClass("d-none");$(".btnCookie",n).on("click",function(){i("coa",1);n.slideToggle()})}};return{init:function(){moduleFactory.registerModule(i,t)},samplePublicMethod:function(){}}};return{getInstance:function(){return t||(t=r()),t}}}(),i=t.getInstance();i.init()}).call(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[1])