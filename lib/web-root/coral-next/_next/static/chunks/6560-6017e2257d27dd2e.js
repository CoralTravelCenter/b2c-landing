"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6560],{86560:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var o=t(87462),r=t(1413),a=t(4942),i=t(97685),c=t(71002),l=t(91),s=t(93967),u=t.n(s),f=t(27678),m=t(21770),d=t(67294),v=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"],p=d.createContext(null),g=0;function useStatus(e){var n=e.src,t=e.isCustomPlaceholder,o=e.fallback,r=(0,d.useState)(t?"loading":"normal"),a=(0,i.Z)(r,2),c=a[0],l=a[1],s=(0,d.useRef)(!1),u="error"===c;(0,d.useEffect)(function(){var e=!0;return new Promise(function(e){var t=document.createElement("img");t.onerror=function(){return e(!1)},t.onload=function(){return e(!0)},t.src=n}).then(function(n){!n&&e&&l("error")}),function(){e=!1}},[n]),(0,d.useEffect)(function(){t&&!s.current?l("loading"):u&&l("normal")},[n]);var onLoad=function(){l("normal")};return[function(e){s.current=!1,"loading"===c&&null!=e&&e.complete&&(e.naturalWidth||e.naturalHeight)&&(s.current=!0,onLoad())},u&&o?{src:o}:{onLoad:onLoad,src:n},c]}var h=t(40974),C=t(64019),Z=t(15105),w=t(91881),y=t(75164),b={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1},x=t(80334);function fixPoint(e,n,t,o){var r=n+t,i=(t-o)/2;if(t>o){if(n>0)return(0,a.Z)({},e,i);if(n<0&&r<o)return(0,a.Z)({},e,-i)}else if(n<0||r>o)return(0,a.Z)({},e,n<0?i:-i);return{}}function getFixScaleEleTransPosition(e,n,t,o){var a=(0,f.g1)(),i=a.width,c=a.height,l=null;return e<=i&&n<=c?l={x:0,y:0}:(e>i||n>c)&&(l=(0,r.Z)((0,r.Z)({},fixPoint("x",t,e,i)),fixPoint("y",o,n,c))),l}function getDistance(e,n){return Math.hypot(e.x-n.x,e.y-n.y)}var S=t(2788),R=t(29372),es_Operations=function(e){var n=e.visible,t=e.maskTransitionName,o=e.getContainer,i=e.prefixCls,c=e.rootClassName,l=e.icons,s=e.countRender,f=e.showSwitch,m=e.showProgress,v=e.current,g=e.transform,h=e.count,C=e.scale,w=e.minScale,y=e.maxScale,b=e.closeIcon,x=e.onSwitchLeft,k=e.onSwitchRight,E=e.onClose,N=e.onZoomIn,T=e.onZoomOut,I=e.onRotateRight,P=e.onRotateLeft,Y=e.onFlipX,X=e.onFlipY,L=e.toolbarRender,D=e.zIndex,M=(0,d.useContext)(p),z=l.rotateLeft,F=l.rotateRight,O=l.zoomIn,_=l.zoomOut,W=l.close,H=l.left,K=l.right,j=l.flipX,V=l.flipY,B="".concat(i,"-operations-operation");d.useEffect(function(){var onKeyDown=function(e){e.keyCode===Z.Z.ESC&&E()};return n&&window.addEventListener("keydown",onKeyDown),function(){window.removeEventListener("keydown",onKeyDown)}},[n]);var G=[{icon:V,onClick:X,type:"flipY"},{icon:j,onClick:Y,type:"flipX"},{icon:z,onClick:P,type:"rotateLeft"},{icon:F,onClick:I,type:"rotateRight"},{icon:_,onClick:T,type:"zoomOut",disabled:C<=w},{icon:O,onClick:N,type:"zoomIn",disabled:C===y}].map(function(e){var n,t=e.icon,o=e.onClick,r=e.type,c=e.disabled;return d.createElement("div",{className:u()(B,(n={},(0,a.Z)(n,"".concat(i,"-operations-operation-").concat(r),!0),(0,a.Z)(n,"".concat(i,"-operations-operation-disabled"),!!c),n)),onClick:o,key:r},t)}),U=d.createElement("div",{className:"".concat(i,"-operations")},G);return d.createElement(R.default,{visible:n,motionName:t},function(e){var n=e.className,t=e.style;return d.createElement(S.Z,{open:!0,getContainer:null!=o?o:document.body},d.createElement("div",{className:u()("".concat(i,"-operations-wrapper"),n,c),style:(0,r.Z)((0,r.Z)({},t),{},{zIndex:D})},null===b?null:d.createElement("button",{className:"".concat(i,"-close"),onClick:E},b||W),f&&d.createElement(d.Fragment,null,d.createElement("div",{className:u()("".concat(i,"-switch-left"),(0,a.Z)({},"".concat(i,"-switch-left-disabled"),0===v)),onClick:x},H),d.createElement("div",{className:u()("".concat(i,"-switch-right"),(0,a.Z)({},"".concat(i,"-switch-right-disabled"),v===h-1)),onClick:k},K)),d.createElement("div",{className:"".concat(i,"-footer")},m&&d.createElement("div",{className:"".concat(i,"-progress")},s?s(v+1,h):"".concat(v+1," / ").concat(h)),L?L(U,(0,r.Z)({icons:{flipYIcon:G[0],flipXIcon:G[1],rotateLeftIcon:G[2],rotateRightIcon:G[3],zoomOutIcon:G[4],zoomInIcon:G[5]},actions:{onFlipY:X,onFlipX:Y,onRotateLeft:P,onRotateRight:I,onZoomOut:T,onZoomIn:N},transform:g},M?{current:v,total:h}:{})):U)))})},k=["fallback","src","imgRef"],E=["prefixCls","src","alt","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],PreviewImage=function(e){var n=e.fallback,t=e.src,r=e.imgRef,a=(0,l.Z)(e,k),c=useStatus({src:t,fallback:n}),s=(0,i.Z)(c,2),u=s[0],f=s[1];return d.createElement("img",(0,o.Z)({ref:function(e){r.current=e,u(e)}},a,f))},es_Preview=function(e){var n,t,c,s,m,v,g,S,R,k,N,T,I,P,Y,X,L,D,M,z,F,O,_,W,H,K,j,V,B=e.prefixCls,G=e.src,U=e.alt,q=e.fallback,A=e.movable,J=void 0===A||A,Q=e.onClose,$=e.visible,ee=e.icons,en=e.rootClassName,et=e.closeIcon,eo=e.getContainer,er=e.current,ea=void 0===er?0:er,ei=e.count,ec=void 0===ei?1:ei,el=e.countRender,es=e.scaleStep,eu=void 0===es?.5:es,ef=e.minScale,em=void 0===ef?1:ef,ed=e.maxScale,ev=void 0===ed?50:ed,ep=e.transitionName,eg=e.maskTransitionName,eh=void 0===eg?"fade":eg,eC=e.imageRender,eZ=e.imgCommonProps,ew=e.toolbarRender,ey=e.onTransform,eb=e.onChange,ex=(0,l.Z)(e,E),eS=(0,d.useRef)(),eR=(0,d.useContext)(p),ek=eR&&ec>1,eE=eR&&ec>=1,eN=(0,d.useState)(!0),eT=(0,i.Z)(eN,2),eI=eT[0],eP=eT[1],eY=(n=(0,d.useRef)(null),t=(0,d.useRef)([]),c=(0,d.useState)(b),m=(s=(0,i.Z)(c,2))[0],v=s[1],g=function(e,o){null===n.current&&(t.current=[],n.current=(0,y.Z)(function(){v(function(e){var a=e;return t.current.forEach(function(e){a=(0,r.Z)((0,r.Z)({},a),e)}),n.current=null,null==ey||ey({transform:a,action:o}),a})})),t.current.push((0,r.Z)((0,r.Z)({},m),e))},{transform:m,resetTransform:function(e){v(b),ey&&!(0,w.Z)(b,m)&&ey({transform:b,action:e})},updateTransform:g,dispatchZoomChange:function(e,n,t,o,r){var a=eS.current,i=a.width,c=a.height,l=a.offsetWidth,s=a.offsetHeight,u=a.offsetLeft,d=a.offsetTop,v=e,p=m.scale*e;p>ev?(p=ev,v=ev/m.scale):p<em&&(v=(p=r?p:em)/m.scale);var h=null!=t?t:innerWidth/2,C=null!=o?o:innerHeight/2,Z=v-1,w=Z*(h-m.x-u),y=Z*(C-m.y-d),b=m.x-(w-Z*i*.5),x=m.y-(y-Z*c*.5);if(e<1&&1===p){var S=l*p,R=s*p,k=(0,f.g1)(),E=k.width,N=k.height;S<=E&&R<=N&&(b=0,x=0)}g({x:b,y:x,scale:p},n)}}),eX=eY.transform,eL=eY.resetTransform,eD=eY.updateTransform,eM=eY.dispatchZoomChange,ez=(S=eX.rotate,R=eX.scale,k=eX.x,N=eX.y,T=(0,d.useState)(!1),P=(I=(0,i.Z)(T,2))[0],Y=I[1],X=(0,d.useRef)({diffX:0,diffY:0,transformX:0,transformY:0}),L=function(e){$&&P&&eD({x:e.pageX-X.current.diffX,y:e.pageY-X.current.diffY},"move")},D=function(){if($&&P){Y(!1);var e=X.current,n=e.transformX,t=e.transformY;if(k!==n&&N!==t){var o=eS.current.offsetWidth*R,a=eS.current.offsetHeight*R,i=eS.current.getBoundingClientRect(),c=i.left,l=i.top,s=S%180!=0,u=getFixScaleEleTransPosition(s?a:o,s?o:a,c,l);u&&eD((0,r.Z)({},u),"dragRebound")}}},(0,d.useEffect)(function(){var e,n,t,o;if(J){t=(0,C.Z)(window,"mouseup",D,!1),o=(0,C.Z)(window,"mousemove",L,!1);try{window.top!==window.self&&(e=(0,C.Z)(window.top,"mouseup",D,!1),n=(0,C.Z)(window.top,"mousemove",L,!1))}catch(e){(0,x.Kp)(!1,"[rc-image] ".concat(e))}}return function(){var r,a,i,c;null===(r=t)||void 0===r||r.remove(),null===(a=o)||void 0===a||a.remove(),null===(i=e)||void 0===i||i.remove(),null===(c=n)||void 0===c||c.remove()}},[$,P,k,N,S,J]),{isMoving:P,onMouseDown:function(e){J&&0===e.button&&(e.preventDefault(),e.stopPropagation(),X.current={diffX:e.pageX-k,diffY:e.pageY-N,transformX:k,transformY:N},Y(!0))},onMouseMove:L,onMouseUp:D,onWheel:function(e){if($&&0!=e.deltaY){var n=1+Math.min(Math.abs(e.deltaY/100),1)*eu;e.deltaY>0&&(n=1/n),eM(n,"wheel",e.clientX,e.clientY)}}}),eF=ez.isMoving,eO=ez.onMouseDown,e_=ez.onWheel,eW=(M=eX.rotate,z=eX.scale,F=eX.x,O=eX.y,_=(0,d.useState)(!1),H=(W=(0,i.Z)(_,2))[0],K=W[1],j=(0,d.useRef)({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),V=function(e){j.current=(0,r.Z)((0,r.Z)({},j.current),e)},(0,d.useEffect)(function(){var e;return $&&J&&(e=(0,C.Z)(window,"touchmove",function(e){return e.preventDefault()},{passive:!1})),function(){var n;null===(n=e)||void 0===n||n.remove()}},[$,J]),{isTouching:H,onTouchStart:function(e){if(J){e.stopPropagation(),K(!0);var n=e.touches,t=void 0===n?[]:n;t.length>1?V({point1:{x:t[0].clientX,y:t[0].clientY},point2:{x:t[1].clientX,y:t[1].clientY},eventType:"touchZoom"}):V({point1:{x:t[0].clientX-F,y:t[0].clientY-O},eventType:"move"})}},onTouchMove:function(e){var n=e.touches,t=void 0===n?[]:n,o=j.current,r=o.point1,a=o.point2,c=o.eventType;if(t.length>1&&"touchZoom"===c){var l={x:t[0].clientX,y:t[0].clientY},s={x:t[1].clientX,y:t[1].clientY},u=function(e,n,t,o){var r=getDistance(e,t),a=getDistance(n,o);if(0===r&&0===a)return[e.x,e.y];var i=r/(r+a);return[e.x+i*(n.x-e.x),e.y+i*(n.y-e.y)]}(r,a,l,s),f=(0,i.Z)(u,2),m=f[0],d=f[1];eM(getDistance(l,s)/getDistance(r,a),"touchZoom",m,d,!0),V({point1:l,point2:s,eventType:"touchZoom"})}else"move"===c&&(eD({x:t[0].clientX-r.x,y:t[0].clientY-r.y},"move"),V({eventType:"move"}))},onTouchEnd:function(){if($){if(H&&K(!1),V({eventType:"none"}),em>z)return eD({x:0,y:0,scale:em},"touchZoom");var e=eS.current.offsetWidth*z,n=eS.current.offsetHeight*z,t=eS.current.getBoundingClientRect(),o=t.left,a=t.top,i=M%180!=0,c=getFixScaleEleTransPosition(i?n:e,i?e:n,o,a);c&&eD((0,r.Z)({},c),"dragRebound")}}}),eH=eW.isTouching,eK=eW.onTouchStart,ej=eW.onTouchMove,eV=eW.onTouchEnd,eB=eX.rotate,eG=eX.scale,eU=u()((0,a.Z)({},"".concat(B,"-moving"),eF));(0,d.useEffect)(function(){eI||eP(!0)},[eI]);var onSwitchLeft=function(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),ea>0&&(eP(!1),eL("prev"),null==eb||eb(ea-1,ea))},onSwitchRight=function(e){null==e||e.preventDefault(),null==e||e.stopPropagation(),ea<ec-1&&(eP(!1),eL("next"),null==eb||eb(ea+1,ea))},onKeyDown=function(e){$&&ek&&(e.keyCode===Z.Z.LEFT?onSwitchLeft():e.keyCode===Z.Z.RIGHT&&onSwitchRight())};(0,d.useEffect)(function(){var e=(0,C.Z)(window,"keydown",onKeyDown,!1);return function(){e.remove()}},[$,ek,ea]);var eq=d.createElement(PreviewImage,(0,o.Z)({},eZ,{width:e.width,height:e.height,imgRef:eS,className:"".concat(B,"-img"),alt:U,style:{transform:"translate3d(".concat(eX.x,"px, ").concat(eX.y,"px, 0) scale3d(").concat(eX.flipX?"-":"").concat(eG,", ").concat(eX.flipY?"-":"").concat(eG,", 1) rotate(").concat(eB,"deg)"),transitionDuration:(!eI||eH)&&"0s"},fallback:q,src:G,onWheel:e_,onMouseDown:eO,onDoubleClick:function(e){$&&(1!==eG?eD({x:0,y:0,scale:1},"doubleClick"):eM(1+eu,"doubleClick",e.clientX,e.clientY))},onTouchStart:eK,onTouchMove:ej,onTouchEnd:eV,onTouchCancel:eV}));return d.createElement(d.Fragment,null,d.createElement(h.default,(0,o.Z)({transitionName:void 0===ep?"zoom":ep,maskTransitionName:eh,closable:!1,keyboard:!0,prefixCls:B,onClose:Q,visible:$,classNames:{wrapper:eU},rootClassName:en,getContainer:eo},ex,{afterClose:function(){eL("close")}}),d.createElement("div",{className:"".concat(B,"-img-wrapper")},eC?eC(eq,(0,r.Z)({transform:eX},eR?{current:ea}:{})):eq)),d.createElement(es_Operations,{visible:$,transform:eX,maskTransitionName:eh,closeIcon:et,getContainer:eo,prefixCls:B,rootClassName:en,icons:void 0===ee?{}:ee,countRender:el,showSwitch:ek,showProgress:eE,current:ea,count:ec,scale:eG,minScale:em,maxScale:ev,toolbarRender:ew,onSwitchLeft:onSwitchLeft,onSwitchRight:onSwitchRight,onZoomIn:function(){eM(1+eu,"zoomIn")},onZoomOut:function(){eM(1/(1+eu),"zoomOut")},onRotateRight:function(){eD({rotate:eB+90},"rotateRight")},onRotateLeft:function(){eD({rotate:eB-90},"rotateLeft")},onFlipX:function(){eD({flipX:!eX.flipX},"flipX")},onFlipY:function(){eD({flipY:!eX.flipY},"flipY")},onClose:Q,zIndex:void 0!==ex.zIndex?ex.zIndex+1:void 0}))},N=t(74902),T=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],I=["src"],P=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],Y=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],ImageInternal=function(e){var n,t,s,h,C=e.src,Z=e.alt,w=e.onPreviewClose,y=e.prefixCls,b=void 0===y?"rc-image":y,x=e.previewPrefixCls,S=void 0===x?"".concat(b,"-preview"):x,R=e.placeholder,k=e.fallback,E=e.width,N=e.height,T=e.style,I=e.preview,X=void 0===I||I,L=e.className,D=e.onClick,M=e.onError,z=e.wrapperClassName,F=e.wrapperStyle,O=e.rootClassName,_=(0,l.Z)(e,P),W=R&&!0!==R,H="object"===(0,c.Z)(X)?X:{},K=H.src,j=H.visible,V=void 0===j?void 0:j,B=H.onVisibleChange,G=H.getContainer,U=H.mask,q=H.maskClassName,A=H.movable,J=H.icons,Q=H.scaleStep,$=H.minScale,ee=H.maxScale,en=H.imageRender,et=H.toolbarRender,eo=(0,l.Z)(H,Y),er=null!=K?K:C,ea=(0,m.Z)(!!V,{value:V,onChange:void 0===B?w:B}),ei=(0,i.Z)(ea,2),ec=ei[0],el=ei[1],es=useStatus({src:C,isCustomPlaceholder:W,fallback:k}),eu=(0,i.Z)(es,3),ef=eu[0],em=eu[1],ed=eu[2],ev=(0,d.useState)(null),ep=(0,i.Z)(ev,2),eg=ep[0],eh=ep[1],eC=(0,d.useContext)(p),eZ=!!X,ew=u()(b,z,O,(0,a.Z)({},"".concat(b,"-error"),"error"===ed)),ey=(0,d.useMemo)(function(){var n={};return v.forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n},v.map(function(n){return e[n]})),eb=(0,d.useMemo)(function(){return(0,r.Z)((0,r.Z)({},ey),{},{src:er})},[er,ey]),ex=(n=d.useState(function(){return String(g+=1)}),t=(0,i.Z)(n,1)[0],s=d.useContext(p),h={data:eb,canPreview:eZ},d.useEffect(function(){if(s)return s.register(t,h)},[]),d.useEffect(function(){s&&s.register(t,h)},[eZ,eb]),t);return d.createElement(d.Fragment,null,d.createElement("div",(0,o.Z)({},_,{className:ew,onClick:eZ?function(e){var n=(0,f.os)(e.target),t=n.left,o=n.top;eC?eC.onPreview(ex,t,o):(eh({x:t,y:o}),el(!0)),null==D||D(e)}:D,style:(0,r.Z)({width:E,height:N},F)}),d.createElement("img",(0,o.Z)({},ey,{className:u()("".concat(b,"-img"),(0,a.Z)({},"".concat(b,"-img-placeholder"),!0===R),L),style:(0,r.Z)({height:N},T),ref:ef},em,{width:E,height:N,onError:M})),"loading"===ed&&d.createElement("div",{"aria-hidden":"true",className:"".concat(b,"-placeholder")},R),U&&eZ&&d.createElement("div",{className:u()("".concat(b,"-mask"),q),style:{display:(null==T?void 0:T.display)==="none"?"none":void 0}},U)),!eC&&eZ&&d.createElement(es_Preview,(0,o.Z)({"aria-hidden":!ec,visible:ec,prefixCls:S,onClose:function(){el(!1),eh(null)},mousePosition:eg,src:er,alt:Z,fallback:k,getContainer:void 0===G?void 0:G,icons:J,movable:A,scaleStep:Q,minScale:$,maxScale:ee,rootClassName:O,imageRender:en,imgCommonProps:ey,toolbarRender:et},eo)))};ImageInternal.PreviewGroup=function(e){var n,t,s,u,f,g,h=e.previewPrefixCls,C=e.children,Z=e.icons,w=e.items,y=e.preview,b=e.fallback,x="object"===(0,c.Z)(y)?y:{},S=x.visible,R=x.onVisibleChange,k=x.getContainer,E=x.current,P=x.movable,Y=x.minScale,X=x.maxScale,L=x.countRender,D=x.closeIcon,M=x.onChange,z=x.onTransform,F=x.toolbarRender,O=x.imageRender,_=(0,l.Z)(x,T),W=(n=d.useState({}),s=(t=(0,i.Z)(n,2))[0],u=t[1],f=d.useCallback(function(e,n){return u(function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,a.Z)({},e,n))}),function(){u(function(n){var t=(0,r.Z)({},n);return delete t[e],t})}},[]),[d.useMemo(function(){return w?w.map(function(e){if("string"==typeof e)return{data:{src:e}};var n={};return Object.keys(e).forEach(function(t){["src"].concat((0,N.Z)(v)).includes(t)&&(n[t]=e[t])}),{data:n}}):Object.keys(s).reduce(function(e,n){var t=s[n],o=t.canPreview,r=t.data;return o&&e.push({data:r,id:n}),e},[])},[w,s]),f]),H=(0,i.Z)(W,2),K=H[0],j=H[1],V=(0,m.Z)(0,{value:E}),B=(0,i.Z)(V,2),G=B[0],U=B[1],q=(0,d.useState)(!1),A=(0,i.Z)(q,2),J=A[0],Q=A[1],$=(null===(g=K[G])||void 0===g?void 0:g.data)||{},ee=$.src,en=(0,l.Z)($,I),et=(0,m.Z)(!!S,{value:S,onChange:function(e,n){null==R||R(e,n,G)}}),eo=(0,i.Z)(et,2),er=eo[0],ea=eo[1],ei=(0,d.useState)(null),ec=(0,i.Z)(ei,2),el=ec[0],es=ec[1],eu=d.useCallback(function(e,n,t){var o=K.findIndex(function(n){return n.id===e});ea(!0),es({x:n,y:t}),U(o<0?0:o),Q(!0)},[K]);d.useEffect(function(){er?J||U(0):Q(!1)},[er]);var ef=d.useMemo(function(){return{register:j,onPreview:eu}},[j,eu]);return d.createElement(p.Provider,{value:ef},C,d.createElement(es_Preview,(0,o.Z)({"aria-hidden":!er,movable:P,visible:er,prefixCls:void 0===h?"rc-image-preview":h,closeIcon:D,onClose:function(){ea(!1),es(null)},mousePosition:el,imgCommonProps:en,src:ee,fallback:b,icons:void 0===Z?{}:Z,minScale:Y,maxScale:X,getContainer:k,current:G,count:K.length,countRender:L,onTransform:z,toolbarRender:F,imageRender:O,onChange:function(e,n){U(e),null==M||M(e,n)}},_)))},ImageInternal.displayName="Image";var X=ImageInternal}}]);